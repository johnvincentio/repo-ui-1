{"version":3,"sources":["webpack:///./assets/javascript/analytics.js","webpack:///./~/autotrack/lib/utilities.js","webpack:///./~/autotrack/lib/provide.js","webpack:///./~/autotrack/lib/usage.js","webpack:///./~/autotrack/lib/constants.js","webpack:///./~/autotrack/lib/method-chain.js","webpack:///./~/dom-utils/index.js","webpack:///./~/autotrack/lib/store.js","webpack:///./~/dom-utils/lib/matches.js","webpack:///./~/autotrack/lib/session.js","webpack:///./~/dom-utils/lib/closest.js","webpack:///./~/dom-utils/lib/parents.js","webpack:///./~/autotrack/lib/event-emitter.js","webpack:///./~/autotrack/lib/plugins/clean-url-tracker.js","webpack:///./~/autotrack/lib/plugins/event-tracker.js","webpack:///./~/autotrack/lib/plugins/max-scroll-tracker.js","webpack:///./~/autotrack/lib/plugins/media-query-tracker.js","webpack:///./~/autotrack/lib/plugins/outbound-link-tracker.js","webpack:///./~/autotrack/lib/plugins/page-visibility-tracker.js","webpack:///./~/autotrack/lib/plugins/social-widget-tracker.js","webpack:///./~/dom-utils/lib/delegate.js","webpack:///./~/dom-utils/lib/dispatch.js","webpack:///./~/dom-utils/lib/get-attributes.js","webpack:///./~/dom-utils/lib/parse-url.js"],"names":["TRACKING_ID","TRACKING_VERSION","NULL_VALUE","dimensions","BREAKPOINT","RESOLUTION","ORIENTATION","HIT_SOURCE","URL_QUERY_PARAMS","METRIC_VALUE","CLIENT_ID","HIT_TYPE","HIT_TIME","HIT_ID","WINDOW_ID","VISIBILITY_STATE","metrics","PAGE_VISIBLE","MAX_SCROLL_PERCENTAGE","PAGE_LOADS","init","window","ga","args","q","push","createTracker","trackErrors","trackCustomDimensions","requireAutotrackPlugins","trackError","err","fieldsObj","Object","assign","eventCategory","eventAction","name","eventLabel","message","stack","nonInteraction","siteSpeedSampleRate","model","paramsToIgnore","hitType","get","hitPayload","hit","split","map","decodeURIComponent","filter","item","param","charAt","indexOf","parts","log","loadErrorEvents","__e","trackErrorEvent","event","error","lineno","colno","addEventListener","keys","forEach","key","tracker","set","uuid","originalBuildHitTask","qt","String","Date","document","visibilityState","stripQuery","queryDimensionIndex","getDefinitionIndex","indexFilename","trailingSlash","sessionTimeout","timeZone","maxScrollMetricIndex","definitions","dimensionIndex","items","media","events","sendInitialPageview","pageLoadsMetricIndex","visibleMetricIndex","definition","exec","b","a","Math","random","toString","replace","createFieldsObj","defaultFields","userFields","undefined","hitFilter","target","buildHitTask","getAttributeFields","element","prefix","attributes","getAttributes","attributeFields","attribute","value","field","camelCase","slice","length","domReady","callback","readyState","fn","removeEventListener","debounce","wait","timeout","clearTimeout","setTimeout","withTimeout","called","queueMap","deferUntilPluginsLoaded","trackingId","ref","processQueue","send","MethodChain","remove","queue","originalMethod","add","sources","i","len","source","prototype","hasOwnProperty","call","str","match","p1","toUpperCase","capitalize","isObject","toArray","Array","isArray","now","provide","pluginName","pluginConstructor","gaAlias","GoogleAnalyticsObject","gaDevIds","gaplugins","plugins","CLEAN_URL_TRACKER","EVENT_TRACKER","IMPRESSION_TRACKER","MEDIA_QUERY_TRACKER","OUTBOUND_FORM_TRACKER","OUTBOUND_LINK_TRACKER","PAGE_VISIBILITY_TRACKER","SOCIAL_WIDGET_TRACKER","URL_CHANGE_TRACKER","MAX_SCROLL_TRACKER","PLUGIN_COUNT","trackUsage","plugin","trackVersion","trackPlugin","convertHexToBin","hex","parseInt","convertBinToHex","bin","padZeros","toAdd","flipBitOn","index","substr","pluginIndex","usageHex","usageBin","VERSION","DEV_ID","VERSION_PARAM","USAGE_PARAM","NULL_DIMENSION","instances","context","methodName","methodOverride","getOrCreateMethodChain","isTask","test","originalMethodReference","methodChain","boundMethodChain","wrappedMethod","lastBoundMethod","overrideMethod","rebindMethodChain","splice","destroy","method","previousMethod","bind","h","AUTOTRACK_PREFIX","isListening","browserSupportsLocalStorage","Store","namespace","defaults","join","initStorageListener","localStorage","setItem","removeItem","getItem","key_","defaults_","cache_","isSupported_","parse","get_","newData","set_","JSON","stringify","clear_","removeStorageListener","storageListener","store","oldData","oldValue","newValue","emit","data","proto","Element","nativeMatches","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","nodeType","selector","nodes","parentNode","querySelectorAll","node","SECONDS","MINUTES","Session","DEFAULT_TIMEOUT","sendHitTaskOverride","dateTimeFormatter","Intl","DateTimeFormat","defaultProps","hitTime","isExpired","getOrCreate","id","getId","sessionData","oldHitTime","currentDate","oldHitDate","datesAreDifferentInTimezone","d1","d2","format","sessionControl","sessionWillStart","sessionWillEnd","closest","shouldCheckSelf","parentElements","concat","parents","parent","list","EventEmitter","registry_","getRegistry_","eventRegistry","handlerIndex","eventCount","CleanUrlTracker","opts","defaultOpts","queryDimension","trackerGetOverride","buildHitTaskOverride","location","page","cleanedFieldsObj","cleanUrlFields","url","parseUrl","pathname","isFilename","search","urlFieldsFilter","userCleanedFieldsObj","EventTracker","attributePrefix","handleEvents","delegates","delegate","composed","useCapture","getAttribute","type","transport","MaxScrollTracker","increaseThreshold","pagePath","getPagePath","handleScroll","trackerSetOverride","session","listenForMaxScrollChanges","maxScrollPercentage","getMaxScrollPercentageForCurrentPage","pageHeight","getPageHeight","scrollPos","pageYOffset","windowHeight","innerHeight","scrollPercentage","min","max","round","sessionId","clear","stopListeningForMaxScrollChanges","increaseAmount","setMaxScrollPercentageForCurrentPage","sendMaxScrollEvent","fields","lastPagePath","eventValue","html","documentElement","body","offsetHeight","scrollHeight","mediaMap","MediaQueryTracker","matchMedia","changeTemplate","changeTimeout","changeListeners","processMediaQueries","mediaName","getMatchName","addChangeListeners","getMediaList","mql","handleChanges","addListener","listener","removeListener","OutboundLinkTracker","linkSelector","shouldTrackOutboundLink","handleLinkInteractions","link","href","navigator","sendBeacon","linkClickWillUnloadCurrentPage","defaultPrevented","preventDefault","hitCallback","parseUrlFn","hostname","protocol","metaKey","ctrlKey","shiftKey","altKey","which","HIDDEN","VISIBLE","PAGE_ID","PageVisibilityTracker","visibleThreshold","lastPageState","visibleThresholdTimeout_","isInitialPageviewSent_","handleChange","handleWindowUnload","handleExternalStoreSet","on","sendPageview","isPageLoad","time","state","pageId","sendPageLoad","lastStoredChange","getAndValidateChangeData","change","sendPageVisibilityEvent","delta","getTimeSinceLastStoredChange","deltaInSeconds","queueTime","SocialWidgetTracker","addWidgetListeners","addTwitterEventHandlers","handleTweetEvents","handleFollowEvents","handleLikeEvents","handleUnlikeEvents","FB","addFacebookEventHandlers","twttr","ready","unbind","Event","subscribe","unsubscribe","region","socialNetwork","socialAction","socialTarget","screenName","screen_name","removeFacebookEventHandlers","removeTwitterEventHandlers","ancestor","eventType","delegateTarget","composedPath","dispatch","eventName","initDict","isCustom","bubbles","cancelable","createEvent","initMethod","detail","dispatchEvent","attrs","attr","HTTP_PORT","HTTPS_PORT","DEFAULT_PORT","RegExp","createElement","cache","port","host","origin","hash"],"mappings":"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","file":"0.main.js","sourcesContent":["import 'autotrack/lib/plugins/clean-url-tracker';\nimport 'autotrack/lib/plugins/event-tracker';\nimport 'autotrack/lib/plugins/max-scroll-tracker';\nimport 'autotrack/lib/plugins/media-query-tracker';\nimport 'autotrack/lib/plugins/outbound-link-tracker';\nimport 'autotrack/lib/plugins/page-visibility-tracker';\nimport 'autotrack/lib/plugins/social-widget-tracker';\n\n\n/* global ga */\n\n\n/**\n * The tracking ID for your Google Analytics property.\n * https://support.google.com/analytics/answer/1032385\n */\nconst TRACKING_ID = 'UA-40829935-1';\n\n/**\n * Bump this when making backwards incompatible changes to the tracking\n * implementation. This allows you to create a segment or view filter\n * that isolates only data captured with the most recent tracking changes.\n */\nconst TRACKING_VERSION = '3';\n\n\n/**\n * A default value for dimensions so unset values always are reported as\n * something. This is needed since Google Analytics will drop empty dimension\n * values in reports.\n */\nconst NULL_VALUE = '(not set)';\n\n\n/**\n * A mapping between custom dimension names and their indexes.\n */\nconst dimensions = {\n  BREAKPOINT: 'dimension1',\n  RESOLUTION: 'dimension2',\n  ORIENTATION: 'dimension3',\n  HIT_SOURCE: 'dimension4',\n  URL_QUERY_PARAMS: 'dimension5',\n  METRIC_VALUE: 'dimension6',\n  CLIENT_ID: 'dimension7',\n  HIT_TYPE: 'dimension8',\n  HIT_TIME: 'dimension9',\n  HIT_ID: 'dimension10',\n  WINDOW_ID: 'dimension11',\n  VISIBILITY_STATE: 'dimension12',\n  TRACKING_VERSION: 'dimension13',\n};\n\n\n/**\n * A mapping between custom metric names and their indexes.\n */\nconst metrics = {\n  PAGE_VISIBLE: 'metric1',\n  MAX_SCROLL_PERCENTAGE: 'metric2',\n  PAGE_LOADS: 'metric3',\n};\n\n\n/**\n * Initializes all the analytics setup. Creates trackers and sets initial\n * values on the trackers.\n */\nexport const init = () => {\n  // Initialize the command queue in case analytics.js hasn't loaded yet.\n  window.ga = window.ga || ((...args) => (ga.q = ga.q || []).push(args));\n\n  createTracker();\n  trackErrors();\n  trackCustomDimensions();\n  requireAutotrackPlugins();\n};\n\n\n/**\n * Tracks a JavaScript error with optional fields object overrides.\n * This function is exported so it can be used in other parts of the codebase.\n * E.g.:\n *\n *    `fetch('/api.json').catch(trackError);`\n *\n * @param {(Error|Object)=} err\n * @param {Object=} fieldsObj\n */\nexport const trackError = (err = {}, fieldsObj = {}) => {\n  ga('send', 'event', Object.assign({\n    eventCategory: 'Error',\n    eventAction: err.name || '(no error name)',\n    eventLabel: `${err.message}\\n${err.stack || '(no stack trace)'}`,\n    nonInteraction: true,\n  }, fieldsObj));\n};\n\n\n/**\n * Creates the trackers and sets the default transport and tracking\n * version fields. In non-production environments it also logs hits.\n */\nconst createTracker = () => {\n  ga('create', TRACKING_ID, 'auto', {\n    siteSpeedSampleRate: 10\n  });\n\n  // Ensures all hits are sent via `navigator.sendBeacon()`.\n  ga('set', 'transport', 'beacon');\n\n  // Log hits in non-production environments.\n  if (process.env.NODE_ENV != 'production') {\n    ga('set', 'sendHitTask', function(model) {\n      var paramsToIgnore = ['v', 'did', 't', 'tid', 'ec', 'ea', 'el', 'ev',\n          'a', 'z', 'ul', 'de', 'sd', 'sr', 'vp', 'je', 'fl', 'jid'];\n\n      var hitType = model.get('&t');\n      var hitPayload = model.get('hitPayload');\n      var hit = hitPayload\n          .split('&')\n          .map(decodeURIComponent)\n          .filter((item) => {\n            const [param] = item.split('=');\n            return !(param.charAt(0) === '_' ||\n                paramsToIgnore.indexOf(param) > -1);\n          });\n\n      var parts = [model.get('&tid'), hitType];\n      if (hitType == 'event') {\n        parts = [\n          ...parts,\n          model.get('&ec'),\n          model.get('&ea'),\n          model.get('&el'),\n        ];\n        if (model.get('&ev')) parts.push(model.get('&ev'));\n      }\n\n      window['console'].log(...parts, hit);\n    });\n  }\n};\n\n\n/**\n * Tracks any errors that may have occured on the page prior to analytics being\n * initialized, then adds an event handler to track future errors.\n */\nconst trackErrors = () => {\n  // Errors that have occurred prior to this script running are stored on\n  // `window.__e.q`, as specified in `index.html`.\n  const loadErrorEvents = window.__e && window.__e.q || [];\n\n  const trackErrorEvent = (event) => {\n    // Use a different eventCategory for uncaught errors.\n    const fieldsObj = {eventCategory: 'Uncaught Error'};\n\n    // Some browsers don't have an error property, so we fake it.\n    const err = event.error || {\n      message: `${event.message} (${event.lineno}:${event.colno})`,\n    };\n\n    trackError(err, fieldsObj);\n  };\n\n  // Replay any stored load error events.\n  for (let event of loadErrorEvents) {\n    trackErrorEvent(event);\n  }\n\n  // Add a new listener to track event immediately.\n  window.addEventListener('error', trackErrorEvent);\n};\n\n\n/**\n * Sets a default dimension value for all custom dimensions on all trackers.\n */\nconst trackCustomDimensions = () => {\n  // Sets a default dimension value for all custom dimensions to ensure\n  // that every dimension in every hit has *some* value. This is necessary\n  // because Google Analytics will drop rows with empty dimension values\n  // in your reports.\n  Object.keys(dimensions).forEach((key) => {\n    ga('set', dimensions[key], NULL_VALUE);\n  });\n\n  // Adds tracking of dimensions known at page load time.\n  ga((tracker) => {\n    tracker.set({\n      [dimensions.TRACKING_VERSION]: TRACKING_VERSION,\n      [dimensions.CLIENT_ID]: tracker.get('clientId'),\n      [dimensions.WINDOW_ID]: uuid(),\n    });\n  });\n\n  // Adds tracking to record each the type, time, uuid, and visibility state\n  // of each hit immediately before it's sent.\n  ga((tracker) => {\n    const originalBuildHitTask = tracker.get('buildHitTask');\n    tracker.set('buildHitTask', (model) => {\n      const qt = model.get('queueTime') || 0;\n      model.set(dimensions.HIT_TIME, String(new Date - qt), true);\n      model.set(dimensions.HIT_ID, uuid(), true);\n      model.set(dimensions.HIT_TYPE, model.get('hitType'), true);\n      model.set(dimensions.VISIBILITY_STATE, document.visibilityState, true);\n\n      originalBuildHitTask(model);\n    });\n  });\n};\n\n\n/**\n * Requires select autotrack plugins and initializes each one with its\n * respective configuration options.\n */\nconst requireAutotrackPlugins = () => {\n  ga('require', 'cleanUrlTracker', {\n    stripQuery: true,\n    queryDimensionIndex: getDefinitionIndex(dimensions.URL_QUERY_PARAMS),\n    indexFilename: 'index.html',\n    trailingSlash: 'add',\n  });\n  ga('require', 'eventTracker');\n  ga('require', 'maxScrollTracker', {\n    sessionTimeout: 30,\n    timeZone: 'America/Los_Angeles',\n    maxScrollMetricIndex: getDefinitionIndex(metrics.MAX_SCROLL_PERCENTAGE),\n  });\n  ga('require', 'mediaQueryTracker', {\n    definitions: [\n      {\n        name: 'Breakpoint',\n        dimensionIndex: 1,\n        items: [\n          {name: 'xs', media: 'all'},\n          {name: 'sm', media: '(min-width: 384px)'},\n          {name: 'md', media: '(min-width: 576px)'},\n          {name: 'lg', media: '(min-width: 768px)'}\n        ]\n      },\n      {\n        name: 'Resolution',\n        dimensionIndex: 2,\n        items: [\n          {name: '1x',   media: 'all'},\n          {name: '1.5x', media: '(-webkit-min-device-pixel-ratio: 1.5), ' +\n                                '(min-resolution: 144dpi)'},\n          {name: '2x',   media: '(-webkit-min-device-pixel-ratio: 2), ' +\n                                '(min-resolution: 192dpi)'},\n        ]\n      },\n      {\n        name: 'Orientation',\n        dimensionIndex: 3,\n        items: [\n          {name: 'landscape', media: '(orientation: landscape)'},\n          {name: 'portrait',  media: '(orientation: portrait)'}\n        ]\n      }\n    ]\n  });\n  ga('require', 'outboundLinkTracker', {\n    events: ['click', 'auxclick', 'contextmenu'],\n  });\n  ga('require', 'pageVisibilityTracker', {\n    sendInitialPageview: true,\n    pageLoadsMetricIndex: getDefinitionIndex(metrics.PAGE_LOADS),\n    visibleMetricIndex: getDefinitionIndex(metrics.PAGE_VISIBLE),\n    timeZone: 'America/Los_Angeles',\n    fieldsObj: {[dimensions.HIT_SOURCE]: 'pageVisibilityTracker'},\n  });\n  ga('require', 'socialWidgetTracker');\n};\n\n\n\n\n/**\n * Accepts a custom dimension or metric and returns it's numerical index.\n * @param {string} definition The definition string (e.g. 'dimension1').\n * @return {number} The definition index.\n */\nconst getDefinitionIndex = (definition) => +/\\d+$/.exec(definition)[0];\n\n\n/**\n * Generates a UUID.\n * https://gist.github.com/jed/982883\n * @param {string|undefined=} a\n * @return {string}\n */\nconst uuid = function b(a) {\n  return a ? (a ^ Math.random() * 16 >> a / 4).toString(16) :\n      ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/javascript/analytics.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {getAttributes} from 'dom-utils';\nimport MethodChain from './method-chain';\n\n\n/**\n * Accepts default and user override fields and an optional tracker, hit\n * filter, and target element and returns a single object that can be used in\n * `ga('send', ...)` commands.\n * @param {FieldsObj} defaultFields The default fields to return.\n * @param {FieldsObj} userFields Fields set by the user to override the\n *     defaults.\n * @param {Tracker=} tracker The tracker object to apply the hit filter to.\n * @param {Function=} hitFilter A filter function that gets\n *     called with the tracker model right before the `buildHitTask`. It can\n *     be used to modify the model for the current hit only.\n * @param {Element=} target If the hit originated from an interaction\n *     with a DOM element, hitFilter is invoked with that element as the\n *     second argument.\n * @param {(Event|TwttrEvent)=} event If the hit originated via a DOM event,\n *     hitFilter is invoked with that event as the third argument.\n * @return {!FieldsObj} The final fields object.\n */\nexport function createFieldsObj(\n    defaultFields, userFields, tracker = undefined,\n    hitFilter = undefined, target = undefined, event = undefined) {\n  if (typeof hitFilter == 'function') {\n    const originalBuildHitTask = tracker.get('buildHitTask');\n    return {\n      buildHitTask: (/** @type {!Model} */ model) => {\n        model.set(defaultFields, null, true);\n        model.set(userFields, null, true);\n        hitFilter(model, target, event);\n        originalBuildHitTask(model);\n      },\n    };\n  } else {\n    return assign({}, defaultFields, userFields);\n  }\n}\n\n\n/**\n * Retrieves the attributes from an DOM element and returns a fields object\n * for all attributes matching the passed prefix string.\n * @param {Element} element The DOM element to get attributes from.\n * @param {string} prefix An attribute prefix. Only the attributes matching\n *     the prefix will be returned on the fields object.\n * @return {FieldsObj} An object of analytics.js fields and values\n */\nexport function getAttributeFields(element, prefix) {\n  const attributes = getAttributes(element);\n  const attributeFields = {};\n\n  Object.keys(attributes).forEach(function(attribute) {\n    // The `on` prefix is used for event handling but isn't a field.\n    if (attribute.indexOf(prefix) === 0 && attribute != prefix + 'on') {\n      let value = attributes[attribute];\n\n      // Detects Boolean value strings.\n      if (value == 'true') value = true;\n      if (value == 'false') value = false;\n\n      const field = camelCase(attribute.slice(prefix.length));\n      attributeFields[field] = value;\n    }\n  });\n\n  return attributeFields;\n}\n\n\n/**\n * Accepts a function to be invoked once the DOM is ready. If the DOM is\n * already ready, the callback is invoked immediately.\n * @param {!Function} callback The ready callback.\n */\nexport function domReady(callback) {\n  if (document.readyState == 'loading') {\n    document.addEventListener('DOMContentLoaded', function fn() {\n      document.removeEventListener('DOMContentLoaded', fn);\n      callback();\n    });\n  } else {\n    callback();\n  }\n}\n\n\n/**\n * Returns a function, that, as long as it continues to be called, will not\n * actually run. The function will only run after it stops being called for\n * `wait` milliseconds.\n * @param {!Function} fn The function to debounce.\n * @param {number} wait The debounce wait timeout in ms.\n * @return {!Function} The debounced function.\n */\nexport function debounce(fn, wait) {\n  let timeout;\n  return function(...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...args), wait);\n  };\n}\n\n\n/**\n * Accepts a function and returns a wrapped version of the function that is\n * expected to be called elsewhere in the system. If it's not called\n * elsewhere after the timeout period, it's called regardless. The wrapper\n * function also prevents the callback from being called more than once.\n * @param {!Function} callback The function to call.\n * @param {number=} wait How many milliseconds to wait before invoking\n *     the callback.\n * @return {!Function} The wrapped version of the passed function.\n */\nexport function withTimeout(callback, wait = 2000) {\n  let called = false;\n  const fn = function() {\n    if (!called) {\n      called = true;\n      callback();\n    }\n  };\n  setTimeout(fn, wait);\n  return fn;\n}\n\n// Maps trackers to queue by tracking ID.\nconst queueMap = {};\n\n/**\n * Queues a function for execution in the next call stack, or immediately\n * before any send commands are executed on the tracker. This allows\n * autotrack plugins to defer running commands until after all other plugins\n * are required but before any other hits are sent.\n * @param {!Tracker} tracker\n * @param {!Function} fn\n */\nexport function deferUntilPluginsLoaded(tracker, fn) {\n  const trackingId = tracker.get('trackingId');\n  const ref = queueMap[trackingId] = queueMap[trackingId] || {};\n\n  const processQueue = () => {\n    clearTimeout(ref.timeout);\n    if (ref.send) {\n      MethodChain.remove(tracker, 'send', ref.send);\n    }\n    delete queueMap[trackingId];\n\n    ref.queue.forEach((fn) => fn());\n  };\n\n  clearTimeout(ref.timeout);\n  ref.timeout = setTimeout(processQueue, 0);\n  ref.queue = ref.queue || [];\n  ref.queue.push(fn);\n\n  if (!ref.send) {\n    ref.send = (originalMethod) => {\n      return (...args) => {\n        processQueue();\n        originalMethod(...args);\n      };\n    };\n    MethodChain.add(tracker, 'send', ref.send);\n  }\n}\n\n\n/**\n * A small shim of Object.assign that aims for brevity over spec-compliant\n * handling all the edge cases.\n * @param {!Object} target The target object to assign to.\n * @param {...?Object} sources Additional objects who properties should be\n *     assigned to target. Non-objects are converted to objects.\n * @return {!Object} The modified target object.\n */\nexport const assign = Object.assign || function(target, ...sources) {\n  for (let i = 0, len = sources.length; i < len; i++) {\n    const source = Object(sources[i]);\n    for (let key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\n\n\n/**\n * Accepts a string containing hyphen or underscore word separators and\n * converts it to camelCase.\n * @param {string} str The string to camelCase.\n * @return {string} The camelCased version of the string.\n */\nexport function camelCase(str) {\n  return str.replace(/[\\-\\_]+(\\w?)/g, function(match, p1) {\n    return p1.toUpperCase();\n  });\n}\n\n\n/**\n * Capitalizes the first letter of a string.\n * @param {string} str The input string.\n * @return {string} The capitalized string\n */\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\n/**\n * Indicates whether the passed variable is a JavaScript object.\n * @param {*} value The input variable to test.\n * @return {boolean} Whether or not the test is an object.\n */\nexport function isObject(value) {\n  return typeof value == 'object' && value !== null;\n}\n\n\n/**\n * Accepts a value that may or may not be an array. If it is not an array,\n * it is returned as the first item in a single-item array.\n * @param {*} value The value to convert to an array if it is not.\n * @return {!Array} The array-ified value.\n */\nexport function toArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\n\n/**\n * @return {number} The current date timestamp\n */\nexport function now() {\n  return +new Date();\n}\n\n\n/*eslint-disable */\n// https://gist.github.com/jed/982883\n/** @param {?=} a */\nexport const uuid = function b(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)};\n/*eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/utilities.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {DEV_ID} from './constants';\nimport {capitalize} from './utilities';\n\n\n/**\n * Provides a plugin for use with analytics.js, accounting for the possibility\n * that the global command queue has been renamed or not yet defined.\n * @param {string} pluginName The plugin name identifier.\n * @param {Function} pluginConstructor The plugin constructor function.\n */\nexport default function provide(pluginName, pluginConstructor) {\n  const gaAlias = window.GoogleAnalyticsObject || 'ga';\n  window[gaAlias] = window[gaAlias] || function(...args) {\n    (window[gaAlias].q = window[gaAlias].q || []).push(args);\n  };\n\n  // Adds the autotrack dev ID if not already included.\n  window.gaDevIds = window.gaDevIds || [];\n  if (window.gaDevIds.indexOf(DEV_ID) < 0) {\n    window.gaDevIds.push(DEV_ID);\n  }\n\n  // Formally provides the plugin for use with analytics.js.\n  window[gaAlias]('provide', pluginName, pluginConstructor);\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  window.gaplugins[capitalize(pluginName)] = pluginConstructor;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/provide.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {USAGE_PARAM, VERSION, VERSION_PARAM} from './constants';\n\n\nexport const plugins = {\n  CLEAN_URL_TRACKER: 1,\n  EVENT_TRACKER: 2,\n  IMPRESSION_TRACKER: 3,\n  MEDIA_QUERY_TRACKER: 4,\n  OUTBOUND_FORM_TRACKER: 5,\n  OUTBOUND_LINK_TRACKER: 6,\n  PAGE_VISIBILITY_TRACKER: 7,\n  SOCIAL_WIDGET_TRACKER: 8,\n  URL_CHANGE_TRACKER: 9,\n  MAX_SCROLL_TRACKER: 10,\n};\n\n\nconst PLUGIN_COUNT = Object.keys(plugins).length;\n\n\n/**\n * Tracks the usage of the passed plugin by encoding a value into a usage\n * string sent with all hits for the passed tracker.\n * @param {!Tracker} tracker The analytics.js tracker object.\n * @param {number} plugin The plugin enum.\n */\nexport function trackUsage(tracker, plugin) {\n  trackVersion(tracker);\n  trackPlugin(tracker, plugin);\n}\n\n\n/**\n * Converts a hexadecimal string to a binary string.\n * @param {string} hex A hexadecimal numeric string.\n * @return {string} a binary numeric string.\n */\nfunction convertHexToBin(hex) {\n  return parseInt(hex || '0', 16).toString(2);\n}\n\n\n/**\n * Converts a binary string to a hexadecimal string.\n * @param {string} bin A binary numeric string.\n * @return {string} a hexadecimal numeric string.\n */\nfunction convertBinToHex(bin) {\n  return parseInt(bin || '0', 2).toString(16);\n}\n\n\n/**\n * Adds leading zeros to a string if it's less than a minimum length.\n * @param {string} str A string to pad.\n * @param {number} len The minimum length of the string\n * @return {string} The padded string.\n */\nfunction padZeros(str, len) {\n  if (str.length < len) {\n    let toAdd = len - str.length;\n    while (toAdd) {\n      str = '0' + str;\n      toAdd--;\n    }\n  }\n  return str;\n}\n\n\n/**\n * Accepts a binary numeric string and flips the digit from 0 to 1 at the\n * specified index.\n * @param {string} str The binary numeric string.\n * @param {number} index The index to flip the bit.\n * @return {string} The new binary string with the bit flipped on\n */\nfunction flipBitOn(str, index) {\n  return str.substr(0, index) + 1 + str.substr(index + 1);\n}\n\n\n/**\n * Accepts a tracker and a plugin index and flips the bit at the specified\n * index on the tracker's usage parameter.\n * @param {Object} tracker An analytics.js tracker.\n * @param {number} pluginIndex The index of the plugin in the global list.\n */\nfunction trackPlugin(tracker, pluginIndex) {\n  const usageHex = tracker.get('&' + USAGE_PARAM);\n  let usageBin = padZeros(convertHexToBin(usageHex), PLUGIN_COUNT);\n\n  // Flip the bit of the plugin being tracked.\n  usageBin = flipBitOn(usageBin, PLUGIN_COUNT - pluginIndex);\n\n  // Stores the modified usage string back on the tracker.\n  tracker.set('&' + USAGE_PARAM, convertBinToHex(usageBin));\n}\n\n\n/**\n * Accepts a tracker and adds the current version to the version param.\n * @param {Object} tracker An analytics.js tracker.\n */\nfunction trackVersion(tracker) {\n  tracker.set('&' + VERSION_PARAM, VERSION);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/usage.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nexport const VERSION = '2.3.3';\nexport const DEV_ID = 'i5iSjo';\n\nexport const VERSION_PARAM = '_av';\nexport const USAGE_PARAM = '_au';\n\nexport const NULL_DIMENSION = '(not set)';\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/constants.js","/**\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @fileoverview\n * The functions exported by this module make it easier (and safer) to override\n * foreign object methods (in a modular way) and respond to or modify their\n * invocation. The primary feature is the ability to override a method without\n * worrying if it's already been overridden somewhere else in the codebase. It\n * also allows for safe restoring of an overridden method by only fully\n * restoring a method once all overrides have been removed.\n */\n\n\nconst instances = [];\n\n\n/**\n * A class that wraps a foreign object method and emit events before and\n * after the original method is called.\n */\nexport default class MethodChain {\n  /**\n   * Adds the passed override method to the list of method chain overrides.\n   * @param {!Object} context The object containing the method to chain.\n   * @param {string} methodName The name of the method on the object.\n   * @param {!Function} methodOverride The override method to add.\n   */\n  static add(context, methodName, methodOverride) {\n    getOrCreateMethodChain(context, methodName).add(methodOverride);\n  }\n\n  /**\n   * Removes a method chain added via `add()`. If the override is the\n   * only override added, the original method is restored.\n   * @param {!Object} context The object containing the method to unchain.\n   * @param {string} methodName The name of the method on the object.\n   * @param {!Function} methodOverride The override method to remove.\n   */\n  static remove(context, methodName, methodOverride) {\n    getOrCreateMethodChain(context, methodName).remove(methodOverride);\n  }\n\n  /**\n   * Wraps a foreign object method and overrides it. Also stores a reference\n   * to the original method so it can be restored later.\n   * @param {!Object} context The object containing the method.\n   * @param {string} methodName The name of the method on the object.\n   */\n  constructor(context, methodName) {\n    this.context = context;\n    this.methodName = methodName;\n    this.isTask = /Task$/.test(methodName);\n\n    this.originalMethodReference = this.isTask ?\n        context.get(methodName) : context[methodName];\n\n    this.methodChain = [];\n    this.boundMethodChain = [];\n\n    // Wraps the original method.\n    this.wrappedMethod = (...args) => {\n      const lastBoundMethod =\n          this.boundMethodChain[this.boundMethodChain.length - 1];\n\n      return lastBoundMethod(...args);\n    };\n\n    // Override original method with the wrapped one.\n    if (this.isTask) {\n      context.set(methodName, this.wrappedMethod);\n    } else {\n      context[methodName] = this.wrappedMethod;\n    }\n  }\n\n  /**\n   * Adds a method to the method chain.\n   * @param {!Function} overrideMethod The override method to add.\n   */\n  add(overrideMethod) {\n    this.methodChain.push(overrideMethod);\n    this.rebindMethodChain();\n  }\n\n  /**\n   * Removes a method from the method chain and restores the prior order.\n   * @param {!Function} overrideMethod The override method to remove.\n   */\n  remove(overrideMethod) {\n    const index = this.methodChain.indexOf(overrideMethod);\n    if (index > -1) {\n      this.methodChain.splice(index, 1);\n      if (this.methodChain.length > 0) {\n        this.rebindMethodChain();\n      } else {\n        this.destroy();\n      }\n    }\n  }\n\n  /**\n   * Loops through the method chain array and recreates the bound method\n   * chain array. This is necessary any time a method is added or removed\n   * to ensure proper original method context and order.\n   */\n  rebindMethodChain() {\n    this.boundMethodChain = [];\n    for (let method, i = 0; method = this.methodChain[i]; i++) {\n      const previousMethod = this.boundMethodChain[i - 1] ||\n          this.originalMethodReference.bind(this.context);\n      this.boundMethodChain.push(method(previousMethod));\n    }\n  }\n\n  /**\n   * Calls super and destroys the instance if no registered handlers remain.\n   */\n  destroy() {\n    const index = instances.indexOf(this);\n    if (index > -1) {\n      instances.splice(index, 1);\n      if (this.isTask) {\n        this.context.set(this.methodName, this.originalMethodReference);\n      } else {\n        this.context[this.methodName] = this.originalMethodReference;\n      }\n    }\n  }\n}\n\n\n/**\n * Gets a MethodChain instance for the passed object and method. If the method\n * has already been wrapped via an existing MethodChain instance, that\n * instance is returned.\n * @param {!Object} context The object containing the method.\n * @param {string} methodName The name of the method on the object.\n * @return {!MethodChain}\n */\nfunction getOrCreateMethodChain(context, methodName) {\n  let methodChain = instances\n      .filter((h) => h.context == context && h.methodName == methodName)[0];\n\n  if (!methodChain) {\n    methodChain = new MethodChain(context, methodName);\n    instances.push(methodChain);\n  }\n  return methodChain;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/method-chain.js","import closest from './lib/closest';\nimport delegate from './lib/delegate';\nimport dispatch from './lib/dispatch';\nimport getAttributes from './lib/get-attributes';\nimport matches from './lib/matches';\nimport parents from './lib/parents';\nimport parseUrl from './lib/parse-url';\n\nexport {\n  closest,\n  delegate,\n  dispatch,\n  getAttributes,\n  matches,\n  parents,\n  parseUrl,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/index.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport EventEmitter from './event-emitter';\nimport {assign} from './utilities';\n\n\nconst AUTOTRACK_PREFIX = 'autotrack';\nconst instances = {};\nlet isListening = false;\n\n\n/** @type {boolean|undefined} */\nlet browserSupportsLocalStorage;\n\n\n/**\n * A storage object to simplify interacting with localStorage.\n */\nexport default class Store extends EventEmitter {\n  /**\n   * Gets an existing instance for the passed arguements or creates a new\n   * instance if one doesn't exist.\n   * @param {string} trackingId The tracking ID for the GA property.\n   * @param {string} namespace A namespace unique to this store.\n   * @param {Object=} defaults An optional object of key/value defaults.\n   * @return {Store} The Store instance.\n   */\n  static getOrCreate(trackingId, namespace, defaults) {\n    const key = [AUTOTRACK_PREFIX, trackingId, namespace].join(':');\n\n    // Don't create multiple instances for the same tracking Id and namespace.\n    if (!instances[key]) {\n      instances[key] = new Store(key, defaults);\n      if (!isListening) initStorageListener();\n    }\n    return instances[key];\n  }\n\n  /**\n   * Returns true if the browser supports and can successfully write to\n   * localStorage. The results is cached so this method can be invoked many\n   * times with no extra performance cost.\n   * @private\n   * @return {boolean}\n   */\n  static isSupported_() {\n    if (browserSupportsLocalStorage != null) {\n      return browserSupportsLocalStorage;\n    }\n\n    try {\n      window.localStorage.setItem(AUTOTRACK_PREFIX, AUTOTRACK_PREFIX);\n      window.localStorage.removeItem(AUTOTRACK_PREFIX);\n      browserSupportsLocalStorage = true;\n    } catch (err) {\n      browserSupportsLocalStorage = false;\n    }\n    return browserSupportsLocalStorage;\n  }\n\n  /**\n   * Wraps the native localStorage method for each stubbing in tests.\n   * @private\n   * @param {string} key The store key.\n   * @return {string|null} The stored value.\n   */\n  static get_(key) {\n    return window.localStorage.getItem(key);\n  }\n\n  /**\n   * Wraps the native localStorage method for each stubbing in tests.\n   * @private\n   * @param {string} key The store key.\n   * @param {string} value The value to store.\n   */\n  static set_(key, value) {\n    window.localStorage.setItem(key, value);\n  }\n\n  /**\n   * Wraps the native localStorage method for each stubbing in tests.\n   * @private\n   * @param {string} key The store key.\n   */\n  static clear_(key) {\n    window.localStorage.removeItem(key);\n  }\n\n  /**\n   * @param {string} key A key unique to this store.\n   * @param {Object=} defaults An optional object of key/value defaults.\n   */\n  constructor(key, defaults = {}) {\n    super();\n    this.key_ = key;\n    this.defaults_ = defaults;\n\n    /** @type {?Object} */\n    this.cache_ = null; // Will be set after the first get.\n  }\n\n  /**\n   * Gets the data stored in localStorage for this store. If the cache is\n   * already populated, return it as is (since it's always kept up-to-date\n   * and in sync with activity in other windows via the `storage` event).\n   * TODO(philipwalton): Implement schema migrations if/when a new\n   * schema version is introduced.\n   * @return {!Object} The stored data merged with the defaults.\n   */\n  get() {\n    if (this.cache_) {\n      return this.cache_;\n    } else {\n      if (Store.isSupported_()) {\n        try {\n          this.cache_ = parse(Store.get_(this.key_));\n        } catch(err) {\n          // Do nothing.\n        }\n      }\n      return this.cache_ = assign({}, this.defaults_, this.cache_);\n    }\n  }\n\n  /**\n   * Saves the passed data object to localStorage,\n   * merging it with the existing data.\n   * @param {Object} newData The data to save.\n   */\n  set(newData) {\n    this.cache_ = assign({}, this.defaults_, this.cache_, newData);\n\n    if (Store.isSupported_()) {\n      try {\n        Store.set_(this.key_, JSON.stringify(this.cache_));\n      } catch(err) {\n        // Do nothing.\n      }\n    }\n  }\n\n  /**\n   * Clears the data in localStorage for the current store.\n   */\n  clear() {\n    this.cache_ = {};\n    if (Store.isSupported_()) {\n      try {\n        Store.clear_(this.key_);\n      } catch(err) {\n        // Do nothing.\n      }\n    }\n  }\n\n  /**\n   * Removes the store instance for the global instances map. If this is the\n   * last store instance, the storage listener is also removed.\n   * Note: this does not erase the stored data. Use `clear()` for that.\n   */\n  destroy() {\n    delete instances[this.key_];\n    if (!Object.keys(instances).length) {\n      removeStorageListener();\n    }\n  }\n}\n\n\n/**\n * Adds a single storage event listener and flips the global `isListening`\n * flag so multiple events aren't added.\n */\nfunction initStorageListener() {\n  window.addEventListener('storage', storageListener);\n  isListening = true;\n}\n\n\n/**\n * Removes the storage event listener and flips the global `isListening`\n * flag so it can be re-added later.\n */\nfunction removeStorageListener() {\n  window.removeEventListener('storage', storageListener);\n  isListening = false;\n}\n\n\n/**\n * The global storage event listener.\n * @param {!Event} event The DOM event.\n */\nfunction storageListener(event) {\n  const store = instances[event.key];\n  if (store) {\n    const oldData = assign({}, store.defaults_, parse(event.oldValue));\n    const newData = assign({}, store.defaults_, parse(event.newValue));\n\n    store.cache_ = newData;\n    store.emit('externalSet', newData, oldData);\n  }\n}\n\n\n/**\n * Parses a source string as JSON\n * @param {string|null} source\n * @return {!Object} The JSON object.\n */\nfunction parse(source) {\n  let data = {};\n  if (source) {\n    try {\n      data = /** @type {!Object} */ (JSON.parse(source));\n    } catch(err) {\n      // Do nothing.\n    }\n  }\n  return data;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/store.js","const proto = window.Element.prototype;\nconst nativeMatches = proto.matches ||\n      proto.matchesSelector ||\n      proto.webkitMatchesSelector ||\n      proto.mozMatchesSelector ||\n      proto.msMatchesSelector ||\n      proto.oMatchesSelector;\n\n\n/**\n * Tests if a DOM elements matches any of the test DOM elements or selectors.\n * @param {Element} element The DOM element to test.\n * @param {Element|string|Array<Element|string>} test A DOM element, a CSS\n *     selector, or an array of DOM elements or CSS selectors to match against.\n * @return {boolean} True of any part of the test matches.\n */\nexport default function matches(element, test) {\n  // Validate input.\n  if (element && element.nodeType == 1 && test) {\n    // if test is a string or DOM element test it.\n    if (typeof test == 'string' || test.nodeType == 1) {\n      return element == test ||\n          matchesSelector(element, /** @type {string} */ (test));\n    } else if ('length' in test) {\n      // if it has a length property iterate over the items\n      // and return true if any match.\n      for (let i = 0, item; item = test[i]; i++) {\n        if (element == item || matchesSelector(element, item)) return true;\n      }\n    }\n  }\n  // Still here? Return false\n  return false;\n}\n\n\n/**\n * Tests whether a DOM element matches a selector. This polyfills the native\n * Element.prototype.matches method across browsers.\n * @param {!Element} element The DOM element to test.\n * @param {string} selector The CSS selector to test element against.\n * @return {boolean} True if the selector matches.\n */\nfunction matchesSelector(element, selector) {\n  if (typeof selector != 'string') return false;\n  if (nativeMatches) return nativeMatches.call(element, selector);\n  const nodes = element.parentNode.querySelectorAll(selector);\n  for (let i = 0, node; node = nodes[i]; i++) {\n    if (node == element) return true;\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/matches.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport MethodChain from './method-chain';\nimport Store from './store';\nimport {now, uuid} from './utilities';\n\n\nconst SECONDS = 1000;\nconst MINUTES = 60 * SECONDS;\n\n\nconst instances = {};\n\n\n/**\n * A session management class that helps track session boundaries\n * across multiple open tabs/windows.\n */\nexport default class Session {\n  /**\n   * Gets an existing instance for the passed arguments or creates a new\n   * instance if one doesn't exist.\n   * @param {!Tracker} tracker An analytics.js tracker object.\n   * @param {number} timeout The session timeout (in minutes). This value\n   *     should match what's set in the \"Session settings\" section of the\n   *     Google Analytics admin.\n   * @param {string=} timeZone The optional IANA time zone of the view. This\n   *     value should match what's set in the \"View settings\" section of the\n   *     Google Analytics admin. (Note: this assumes all views for the property\n   *     use the same time zone. If that's not true, it's better not to use\n   *     this feature).\n   * @return {Session} The Session instance.\n   */\n  static getOrCreate(tracker, timeout, timeZone) {\n    // Don't create multiple instances for the same property.\n    const trackingId = tracker.get('trackingId');\n    if (instances[trackingId]) {\n      return instances[trackingId];\n    } else {\n      return instances[trackingId] = new Session(tracker, timeout, timeZone);\n    }\n  }\n\n  /**\n   * @param {!Tracker} tracker An analytics.js tracker object.\n   * @param {number} timeout The session timeout (in minutes). This value\n   *     should match what's set in the \"Session settings\" section of the\n   *     Google Analytics admin.\n   * @param {string=} timeZone The optional IANA time zone of the view. This\n   *     value should match what's set in the \"View settings\" section of the\n   *     Google Analytics admin. (Note: this assumes all views for the property\n   *     use the same time zone. If that's not true, it's better not to use\n   *     this feature).\n   */\n  constructor(tracker, timeout, timeZone) {\n    this.tracker = tracker;\n    this.timeout = timeout || Session.DEFAULT_TIMEOUT;\n    this.timeZone = timeZone;\n\n    // Binds methods.\n    this.sendHitTaskOverride = this.sendHitTaskOverride.bind(this);\n\n    // Overrides into the trackers sendHitTask method.\n    MethodChain.add(tracker, 'sendHitTask', this.sendHitTaskOverride);\n\n    // Some browser doesn't support various features of the\n    // `Intl.DateTimeFormat` API, so we have to try/catch it. Consequently,\n    // this allows us to assume the presence of `this.dateTimeFormatter` means\n    // it works in the current browser.\n    try {\n      this.dateTimeFormatter =\n          new Intl.DateTimeFormat('en-US', {timeZone: this.timeZone});\n    } catch(err) {\n      // Do nothing.\n    }\n\n    /** @type {SessionStoreData} */\n    const defaultProps = {\n      hitTime: 0,\n      isExpired: false,\n    };\n    this.store = Store.getOrCreate(\n        tracker.get('trackingId'), 'session', defaultProps);\n\n    // Ensure the session has an ID.\n    if (!this.store.get().id) {\n      this.store.set(/** @type {SessionStoreData} */ ({id: uuid()}));\n    }\n  }\n\n  /**\n   * Returns the ID of the current session.\n   * @return {string}\n   */\n  getId() {\n    return this.store.get().id;\n  }\n\n  /**\n   * Accepts a session ID and returns true if the specified session has\n   * evidentially expired. A session can expire for two reasons:\n   *   - More than 30 minutes has elapsed since the previous hit\n   *     was sent (The 30 minutes number is the Google Analytics default, but\n   *     it can be modified in GA admin \"Session settings\").\n   *   - A new day has started since the previous hit, in the\n   *     specified time zone (should correspond to the time zone of the\n   *     property's views).\n   *\n   * Note: since real session boundaries are determined at processing time,\n   * this is just a best guess rather than a source of truth.\n   *\n   * @param {string} id The ID of a session to check for expiry.\n   * @return {boolean} True if the session has not exp\n   */\n  isExpired(id = this.getId()) {\n    // If a session ID is passed and it doesn't match the current ID,\n    // assume it's from an expired session. If no ID is passed, assume the ID\n    // of the current session.\n    if (id != this.getId()) return true;\n\n    /** @type {SessionStoreData} */\n    const sessionData = this.store.get();\n\n    // `isExpired` will be `true` if the sessionControl field was set to\n    // 'end' on the previous hit.\n    if (sessionData.isExpired) return true;\n\n    const oldHitTime = sessionData.hitTime;\n\n    // Only consider a session expired if previous hit time data exists, and\n    // the previous hit time is greater than that session timeout period or\n    // the hits occurred on different days in the session timezone.\n    if (oldHitTime) {\n      const currentDate = new Date();\n      const oldHitDate = new Date(oldHitTime);\n      if (currentDate - oldHitDate > (this.timeout * MINUTES) ||\n          this.datesAreDifferentInTimezone(currentDate, oldHitDate)) {\n        return true;\n      }\n    }\n\n    // For all other cases return false.\n    return false;\n  }\n\n  /**\n   * Returns true if (and only if) the timezone date formatting is supported\n   * in the current browser and if the two dates are definitively not the\n   * same date in the session timezone. Anything short of this returns false.\n   * @param {!Date} d1\n   * @param {!Date} d2\n   * @return {boolean}\n   */\n  datesAreDifferentInTimezone(d1, d2) {\n    if (!this.dateTimeFormatter) {\n      return false;\n    } else {\n      return this.dateTimeFormatter.format(d1)\n          != this.dateTimeFormatter.format(d2);\n    }\n  }\n\n  /**\n   * Keeps track of when the previous hit was sent to determine if a session\n   * has expired. Also inspects the `sessionControl` field to handles\n   * expiration accordingly.\n   * @param {function(!Model)} originalMethod A reference to the overridden\n   *     method.\n   * @return {function(!Model)}\n   */\n  sendHitTaskOverride(originalMethod) {\n    return (model) => {\n      originalMethod(model);\n\n      const sessionControl = model.get('sessionControl');\n      const sessionWillStart = sessionControl == 'start' || this.isExpired();\n      const sessionWillEnd = sessionControl == 'end';\n\n      /** @type {SessionStoreData} */\n      const sessionData = this.store.get();\n      sessionData.hitTime = now();\n      if (sessionWillStart) {\n        sessionData.isExpired = false;\n        sessionData.id = uuid();\n      }\n      if (sessionWillEnd) {\n        sessionData.isExpired = true;\n      }\n      this.store.set(sessionData);\n    };\n  }\n\n  /**\n   * Restores the tracker's original `sendHitTask` to the state before\n   * session control was initialized and removes this instance from the global\n   * store.\n   */\n  destroy() {\n    MethodChain.remove(this.tracker, 'sendHitTask', this.sendHitTaskOverride);\n    this.store.destroy();\n    delete instances[this.tracker.get('trackingId')];\n  }\n}\n\n\nSession.DEFAULT_TIMEOUT = 30; // minutes\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/session.js","import matches from './matches';\nimport parents from './parents';\n\n/**\n * Gets the closest parent element that matches the passed selector.\n * @param {Element} element The element whose parents to check.\n * @param {string} selector The CSS selector to match against.\n * @param {boolean=} shouldCheckSelf True if the selector should test against\n *     the passed element itself.\n * @return {Element|undefined} The matching element or undefined.\n */\nexport default function closest(element, selector, shouldCheckSelf = false) {\n  if (!(element && element.nodeType == 1 && selector)) return;\n  const parentElements =\n      (shouldCheckSelf ? [element] : []).concat(parents(element));\n\n  for (let i = 0, parent; parent = parentElements[i]; i++) {\n    if (matches(parent, selector)) return parent;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/closest.js","/**\n * Returns an array of a DOM element's parent elements.\n * @param {!Element} element The DOM element whose parents to get.\n * @return {!Array} An array of all parent elemets, or an empty array if no\n *     parent elements are found.\n */\nexport default function parents(element) {\n  const list = [];\n  while (element && element.parentNode && element.parentNode.nodeType == 1) {\n    element = /** @type {!Element} */ (element.parentNode);\n    list.push(element);\n  }\n  return list;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/parents.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * An simple reimplementation of the native Node.js EventEmitter class.\n * The goal of this implementation is to be as small as possible.\n */\nexport default class EventEmitter {\n  /**\n   * Creates the event registry.\n   */\n  constructor() {\n    this.registry_ = {};\n  }\n\n  /**\n   * Adds a handler function to the registry for the passed event.\n   * @param {string} event The event name.\n   * @param {!Function} fn The handler to be invoked when the passed\n   *     event is emitted.\n   */\n  on(event, fn) {\n    this.getRegistry_(event).push(fn);\n  }\n\n  /**\n   * Removes a handler function from the registry for the passed event.\n   * @param {string=} event The event name.\n   * @param {Function=} fn The handler to be removed.\n   */\n  off(event = undefined, fn = undefined) {\n    if (event && fn) {\n      const eventRegistry = this.getRegistry_(event);\n      const handlerIndex = eventRegistry.indexOf(fn);\n      if (handlerIndex > -1) {\n        eventRegistry.splice(handlerIndex, 1);\n      }\n    } else {\n      this.registry_ = {};\n    }\n  }\n\n  /**\n   * Runs all registered handlers for the passed event with the optional args.\n   * @param {string} event The event name.\n   * @param {...*} args The arguments to be passed to the handler.\n   */\n  emit(event, ...args) {\n    this.getRegistry_(event).forEach((fn) => fn(...args));\n  }\n\n  /**\n   * Returns the total number of event handlers currently registered.\n   * @return {number}\n   */\n  getEventCount() {\n    let eventCount = 0;\n    Object.keys(this.registry_).forEach((event) => {\n      eventCount += this.getRegistry_(event).length;\n    });\n    return eventCount;\n  }\n\n  /**\n   * Returns an array of handlers associated with the passed event name.\n   * If no handlers have been registered, an empty array is returned.\n   * @private\n   * @param {string} event The event name.\n   * @return {!Array} An array of handler functions.\n   */\n  getRegistry_(event) {\n    return this.registry_[event] = (this.registry_[event] || []);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/event-emitter.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {parseUrl} from 'dom-utils';\nimport {NULL_DIMENSION} from '../constants';\nimport MethodChain from '../method-chain';\nimport provide from '../provide';\nimport {plugins, trackUsage} from '../usage';\nimport {assign} from '../utilities';\n\n\n/**\n * Class for the `cleanUrlTracker` analytics.js plugin.\n * @implements {CleanUrlTrackerPublicInterface}\n */\nclass CleanUrlTracker {\n  /**\n   * Registers clean URL tracking on a tracker object. The clean URL tracker\n   * removes query parameters from the page value reported to Google Analytics.\n   * It also helps to prevent tracking similar URLs, e.g. sometimes ending a\n   * URL with a slash and sometimes not.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?CleanUrlTrackerOpts} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.CLEAN_URL_TRACKER);\n\n    /** @type {CleanUrlTrackerOpts} */\n    const defaultOpts = {\n      // stripQuery: undefined,\n      // queryDimensionIndex: undefined,\n      // indexFilename: undefined,\n      // trailingSlash: undefined,\n      // urlFilter: undefined,\n    };\n    this.opts = /** @type {CleanUrlTrackerOpts} */ (assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n\n    /** @type {string|null} */\n    this.queryDimension = this.opts.stripQuery &&\n        this.opts.queryDimensionIndex ?\n            `dimension${this.opts.queryDimensionIndex}` : null;\n\n    // Binds methods to `this`.\n    this.trackerGetOverride = this.trackerGetOverride.bind(this);\n    this.buildHitTaskOverride = this.buildHitTaskOverride.bind(this);\n\n    // Override built-in tracker method to watch for changes.\n    MethodChain.add(tracker, 'get', this.trackerGetOverride);\n    MethodChain.add(tracker, 'buildHitTask', this.buildHitTaskOverride);\n  }\n\n  /**\n   * Ensures reads of the tracker object by other plugins always see the\n   * \"cleaned\" versions of all URL fields.\n   * @param {function(string):*} originalMethod A reference to the overridden\n   *     method.\n   * @return {function(string):*}\n   */\n  trackerGetOverride(originalMethod) {\n    return (field) => {\n      if (field == 'page' || field == this.queryDimension) {\n        const fieldsObj = /** @type {!FieldsObj} */ ({\n          location: originalMethod('location'),\n          page: originalMethod('page'),\n        });\n        const cleanedFieldsObj = this.cleanUrlFields(fieldsObj);\n        return cleanedFieldsObj[field];\n      } else {\n        return originalMethod(field);\n      }\n    };\n  }\n\n  /**\n   * Cleans URL fields passed in a send command.\n   * @param {function(!Model)} originalMethod A reference to the\n   *     overridden method.\n   * @return {function(!Model)}\n   */\n  buildHitTaskOverride(originalMethod) {\n    return (model) => {\n      const cleanedFieldsObj = this.cleanUrlFields({\n        location: model.get('location'),\n        page: model.get('page'),\n      });\n      model.set(cleanedFieldsObj, null, true);\n      originalMethod(model);\n    };\n  }\n\n  /**\n   * Accepts of fields object containing URL fields and returns a new\n   * fields object with the URLs \"cleaned\" according to the tracker options.\n   * @param {!FieldsObj} fieldsObj\n   * @return {!FieldsObj}\n   */\n  cleanUrlFields(fieldsObj) {\n    const url = parseUrl(\n        /** @type {string} */ (fieldsObj.page || fieldsObj.location));\n\n    let pathname = url.pathname;\n\n    // If an index filename was provided, remove it if it appears at the end\n    // of the URL.\n    if (this.opts.indexFilename) {\n      const parts = pathname.split('/');\n      if (this.opts.indexFilename == parts[parts.length - 1]) {\n        parts[parts.length - 1] = '';\n        pathname = parts.join('/');\n      }\n    }\n\n    // Ensure the URL ends with or doesn't end with slash based on the\n    // `trailingSlash` option. Note that filename URLs should never contain\n    // a trailing slash.\n    if (this.opts.trailingSlash == 'remove') {\n        pathname = pathname.replace(/\\/+$/, '');\n    } else if (this.opts.trailingSlash == 'add') {\n      const isFilename = /\\.\\w+$/.test(pathname);\n      if (!isFilename && pathname.substr(-1) != '/') {\n        pathname = pathname + '/';\n      }\n    }\n\n    /** @type {!FieldsObj} */\n    const cleanedFieldsObj = {\n      page: pathname + (!this.opts.stripQuery ? url.search : ''),\n    };\n    if (fieldsObj.location) {\n      cleanedFieldsObj.location = fieldsObj.location;\n    }\n    if (this.queryDimension) {\n      cleanedFieldsObj[this.queryDimension] =\n          url.search.slice(1) || NULL_DIMENSION;\n    }\n\n    // Apply the `urlFieldsFilter()` option if passed.\n    if (typeof this.opts.urlFieldsFilter == 'function') {\n      /** @type {!FieldsObj} */\n      const userCleanedFieldsObj =\n          this.opts.urlFieldsFilter(cleanedFieldsObj, parseUrl);\n\n      // Ensure only the URL fields are returned.\n      return {\n        page: userCleanedFieldsObj.page,\n        location: userCleanedFieldsObj.location,\n        [this.queryDimension]: userCleanedFieldsObj[this.queryDimension],\n      };\n    } else {\n      return cleanedFieldsObj;\n    }\n  }\n\n  /**\n   * Restores all overridden tasks and methods.\n   */\n  remove() {\n    MethodChain.remove(this.tracker, 'get', this.trackerGetOverride);\n    MethodChain.remove(this.tracker, 'buildHitTask', this.buildHitTaskOverride);\n  }\n}\n\n\nprovide('cleanUrlTracker', CleanUrlTracker);\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/clean-url-tracker.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {delegate} from 'dom-utils';\nimport provide from '../provide';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj, getAttributeFields} from '../utilities';\n\n\n/**\n * Class for the `eventTracker` analytics.js plugin.\n * @implements {EventTrackerPublicInterface}\n */\nclass EventTracker {\n  /**\n   * Registers declarative event tracking.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?EventTrackerOpts} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.EVENT_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!window.addEventListener) return;\n\n    /** @type {EventTrackerOpts} */\n    const defaultOpts = {\n      events: ['click'],\n      fieldsObj: {},\n      attributePrefix: 'ga-',\n      // hitFilter: undefined,\n    };\n\n    this.opts = /** @type {EventTrackerOpts} */ (assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n\n    // Binds methods.\n    this.handleEvents = this.handleEvents.bind(this);\n\n    const selector = '[' + this.opts.attributePrefix + 'on]';\n\n    // Creates a mapping of events to their delegates\n    this.delegates = {};\n    this.opts.events.forEach((event) => {\n      this.delegates[event] = delegate(document, event, selector,\n          this.handleEvents, {composed: true, useCapture: true});\n    });\n  }\n\n  /**\n   * Handles all events on elements with event attributes.\n   * @param {Event} event The DOM click event.\n   * @param {Element} element The delegated DOM element target.\n   */\n  handleEvents(event, element) {\n    const prefix = this.opts.attributePrefix;\n    const events = element.getAttribute(prefix + 'on').split(/\\s*,\\s*/);\n\n    // Ensures the type matches one of the events specified on the element.\n    if (events.indexOf(event.type) < 0) return;\n\n    /** @type {FieldsObj} */\n    const defaultFields = {transport: 'beacon'};\n    const attributeFields = getAttributeFields(element, prefix);\n    const userFields = assign({}, this.opts.fieldsObj, attributeFields);\n    const hitType = attributeFields.hitType || 'event';\n\n    this.tracker.send(hitType, createFieldsObj(defaultFields,\n        userFields, this.tracker, this.opts.hitFilter, element, event));\n  }\n\n  /**\n   * Removes all event listeners and instance properties.\n   */\n  remove() {\n    Object.keys(this.delegates).forEach((key) => {\n      this.delegates[key].destroy();\n    });\n  }\n}\n\n\nprovide('eventTracker', EventTracker);\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/event-tracker.js","/**\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {parseUrl} from 'dom-utils';\nimport MethodChain from '../method-chain';\nimport provide from '../provide';\nimport Session from '../session';\nimport Store from '../store';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj, debounce, isObject} from '../utilities';\n\n\n/**\n * Class for the `maxScrollQueryTracker` analytics.js plugin.\n * @implements {MaxScrollTrackerPublicInterface}\n */\nclass MaxScrollTracker {\n  /**\n   * Registers outbound link tracking on tracker object.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?Object} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.MAX_SCROLL_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!window.addEventListener) return;\n\n    /** @type {MaxScrollTrackerOpts} */\n    const defaultOpts = {\n      increaseThreshold: 20,\n      sessionTimeout: Session.DEFAULT_TIMEOUT,\n      // timeZone: undefined,\n      // maxScrollMetricIndex: undefined,\n      fieldsObj: {},\n      // hitFilter: undefined\n    };\n\n    this.opts = /** @type {MaxScrollTrackerOpts} */ (\n        assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n    this.pagePath = this.getPagePath();\n\n    // Binds methods to `this`.\n    this.handleScroll = debounce(this.handleScroll.bind(this), 500);\n    this.trackerSetOverride = this.trackerSetOverride.bind(this);\n\n    // Creates the store and binds storage change events.\n    this.store = Store.getOrCreate(\n        tracker.get('trackingId'), 'plugins/max-scroll-tracker');\n\n    // Creates the session and binds session events.\n    this.session = Session.getOrCreate(\n        tracker, this.opts.sessionTimeout, this.opts.timeZone);\n\n    // Override the built-in tracker.set method to watch for changes.\n    MethodChain.add(tracker, 'set', this.trackerSetOverride);\n\n    this.listenForMaxScrollChanges();\n  }\n\n\n  /**\n   * Adds a scroll event listener if the max scroll percentage for the\n   * current page isn't already at 100%.\n   */\n  listenForMaxScrollChanges() {\n    const maxScrollPercentage = this.getMaxScrollPercentageForCurrentPage();\n    if (maxScrollPercentage < 100) {\n      window.addEventListener('scroll', this.handleScroll);\n    }\n  }\n\n\n  /**\n   * Removes an added scroll listener.\n   */\n  stopListeningForMaxScrollChanges() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n\n  /**\n   * Handles the scroll event. If the current scroll percentage is greater\n   * that the stored scroll event by at least the specified increase threshold,\n   * send an event with the increase amount.\n   */\n  handleScroll() {\n    const pageHeight = getPageHeight();\n    const scrollPos = window.pageYOffset; // scrollY isn't supported in IE.\n    const windowHeight = window.innerHeight;\n\n    // Ensure scrollPercentage is an integer between 0 and 100.\n    const scrollPercentage = Math.min(100, Math.max(0,\n        Math.round(100 * (scrollPos / (pageHeight - windowHeight)))));\n\n    // If the max scroll data gets out of the sync with the session data\n    // (for whatever reason), clear it.\n    const sessionId = this.session.getId();\n    if (sessionId != this.store.get().sessionId) {\n      this.store.clear();\n      this.store.set({sessionId});\n    }\n\n    // If the session has expired, clear the stored data and don't send any\n    // events (since they'd start a new session). Note: this check is needed,\n    // in addition to the above check, to handle cases where the session IDs\n    // got out of sync, but the session didn't expire.\n    if (this.session.isExpired(this.store.get().sessionId)) {\n      this.store.clear();\n    } else {\n      const maxScrollPercentage = this.getMaxScrollPercentageForCurrentPage();\n\n      if (scrollPercentage > maxScrollPercentage) {\n        if (scrollPercentage == 100 || maxScrollPercentage == 100) {\n          this.stopListeningForMaxScrollChanges();\n        }\n        const increaseAmount = scrollPercentage - maxScrollPercentage;\n        if (scrollPercentage == 100 ||\n            increaseAmount >= this.opts.increaseThreshold) {\n          this.setMaxScrollPercentageForCurrentPage(scrollPercentage);\n          this.sendMaxScrollEvent(increaseAmount, scrollPercentage);\n        }\n      }\n    }\n  }\n\n  /**\n   * Detects changes to the tracker object and triggers an update if the page\n   * field has changed.\n   * @param {function((Object|string), (string|undefined))} originalMethod\n   *     A reference to the overridden method.\n   * @return {function((Object|string), (string|undefined))}\n   */\n  trackerSetOverride(originalMethod) {\n    return (field, value) => {\n      originalMethod(field, value);\n\n      /** @type {!FieldsObj} */\n      const fields = isObject(field) ? field : {[field]: value};\n      if (fields.page) {\n        const lastPagePath = this.pagePath;\n        this.pagePath = this.getPagePath();\n\n        if (this.pagePath != lastPagePath) {\n          // Since event listeners for the same function are never added twice,\n          // we don't need to worry about whether we're already listening. We\n          // can just add the event listener again.\n          this.listenForMaxScrollChanges();\n        }\n      }\n    };\n  }\n\n  /**\n   * Sends an event for the increased max scroll percentage amount.\n   * @param {number} increaseAmount\n   * @param {number} scrollPercentage\n   */\n  sendMaxScrollEvent(increaseAmount, scrollPercentage) {\n    /** @type {FieldsObj} */\n    const defaultFields = {\n      transport: 'beacon',\n      eventCategory: 'Max Scroll',\n      eventAction: 'increase',\n      eventValue: increaseAmount,\n      eventLabel: String(scrollPercentage),\n      nonInteraction: true,\n    };\n\n    // If a custom metric was specified, set it equal to the event value.\n    if (this.opts.maxScrollMetricIndex) {\n      defaultFields['metric' + this.opts.maxScrollMetricIndex] = increaseAmount;\n    }\n\n    this.tracker.send('event',\n        createFieldsObj(defaultFields, this.opts.fieldsObj,\n            this.tracker, this.opts.hitFilter));\n  }\n\n  /**\n   * Stores the current max scroll percentage for the current page.\n   * @param {number} maxScrollPercentage\n   */\n  setMaxScrollPercentageForCurrentPage(maxScrollPercentage) {\n    this.store.set({\n      [this.pagePath]: maxScrollPercentage,\n      sessionId: this.session.getId(),\n    });\n  }\n\n  /**\n   * Gets the stored max scroll percentage for the current page.\n   * @return {number}\n   */\n  getMaxScrollPercentageForCurrentPage() {\n    return this.store.get()[this.pagePath] || 0;\n  }\n\n  /**\n   * Gets the page path from the tracker object.\n   * @return {number}\n   */\n  getPagePath() {\n    const url = parseUrl(\n        this.tracker.get('page') || this.tracker.get('location'));\n    return url.pathname + url.search;\n  }\n\n  /**\n   * Removes all event listeners and restores overridden methods.\n   */\n  remove() {\n    this.session.destroy();\n    this.stopListeningForMaxScrollChanges();\n    MethodChain.remove(this.tracker, 'set', this.trackerSetOverride);\n  }\n}\n\n\nprovide('maxScrollTracker', MaxScrollTracker);\n\n\n/**\n * Gets the maximum height of the page including scrollable area.\n * @return {number}\n */\nfunction getPageHeight() {\n  const html = document.documentElement;\n  const body = document.body;\n  return Math.max(html.offsetHeight, html.scrollHeight,\n      body.offsetHeight, body.scrollHeight);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/max-scroll-tracker.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {NULL_DIMENSION} from '../constants';\nimport provide from '../provide';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj,\n        debounce, isObject, toArray} from '../utilities';\n\n\n/**\n * Declares the MediaQueryList instance cache.\n */\nconst mediaMap = {};\n\n\n/**\n * Class for the `mediaQueryTracker` analytics.js plugin.\n * @implements {MediaQueryTrackerPublicInterface}\n */\nclass MediaQueryTracker {\n  /**\n   * Registers media query tracking.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?Object} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.MEDIA_QUERY_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!window.matchMedia) return;\n\n    /** @type {MediaQueryTrackerOpts} */\n    const defaultOpts = {\n      // definitions: unefined,\n      changeTemplate: this.changeTemplate,\n      changeTimeout: 1000,\n      fieldsObj: {},\n      // hitFilter: undefined,\n    };\n\n    this.opts = /** @type {MediaQueryTrackerOpts} */ (\n        assign(defaultOpts, opts));\n\n    // Exits early if media query data doesn't exist.\n    if (!isObject(this.opts.definitions)) return;\n\n    this.opts.definitions = toArray(this.opts.definitions);\n    this.tracker = tracker;\n    this.changeListeners = [];\n\n    this.processMediaQueries();\n  }\n\n  /**\n   * Loops through each media query definition, sets the custom dimenion data,\n   * and adds the change listeners.\n   */\n  processMediaQueries() {\n    this.opts.definitions.forEach((definition) => {\n      // Only processes definitions with a name and index.\n      if (definition.name && definition.dimensionIndex) {\n        const mediaName = this.getMatchName(definition);\n        this.tracker.set('dimension' + definition.dimensionIndex, mediaName);\n\n        this.addChangeListeners(definition);\n      }\n    });\n  }\n\n  /**\n   * Takes a definition object and return the name of the matching media item.\n   * If no match is found, the NULL_DIMENSION value is returned.\n   * @param {Object} definition A set of named media queries associated\n   *     with a single custom dimension.\n   * @return {string} The name of the matched media or NULL_DIMENSION.\n   */\n  getMatchName(definition) {\n    let match;\n\n    definition.items.forEach((item) => {\n      if (getMediaList(item.media).matches) {\n        match = item;\n      }\n    });\n    return match ? match.name : NULL_DIMENSION;\n  }\n\n  /**\n   * Adds change listeners to each media query in the definition list.\n   * Debounces the changes to prevent unnecessary hits from being sent.\n   * @param {Object} definition A set of named media queries associated\n   *     with a single custom dimension\n   */\n  addChangeListeners(definition) {\n    definition.items.forEach((item) => {\n      const mql = getMediaList(item.media);\n      const fn = debounce(() => {\n        this.handleChanges(definition);\n      }, this.opts.changeTimeout);\n\n      mql.addListener(fn);\n      this.changeListeners.push({mql, fn});\n    });\n  }\n\n  /**\n   * Handles changes to the matched media. When the new value differs from\n   * the old value, a change event is sent.\n   * @param {Object} definition A set of named media queries associated\n   *     with a single custom dimension\n   */\n  handleChanges(definition) {\n    const newValue = this.getMatchName(definition);\n    const oldValue = this.tracker.get('dimension' + definition.dimensionIndex);\n\n    if (newValue !== oldValue) {\n      this.tracker.set('dimension' + definition.dimensionIndex, newValue);\n\n      /** @type {FieldsObj} */\n      const defaultFields = {\n        transport: 'beacon',\n        eventCategory: definition.name,\n        eventAction: 'change',\n        eventLabel: this.opts.changeTemplate(oldValue, newValue),\n        nonInteraction: true,\n      };\n      this.tracker.send('event', createFieldsObj(defaultFields,\n          this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n    }\n  }\n\n  /**\n   * Removes all event listeners and instance properties.\n   */\n  remove() {\n    for (let i = 0, listener; listener = this.changeListeners[i]; i++) {\n      listener.mql.removeListener(listener.fn);\n    }\n  }\n\n  /**\n   * Sets the default formatting of the change event label.\n   * This can be overridden by setting the `changeTemplate` option.\n   * @param {string} oldValue The value of the media query prior to the change.\n   * @param {string} newValue The value of the media query after the change.\n   * @return {string} The formatted event label.\n   */\n  changeTemplate(oldValue, newValue) {\n    return oldValue + ' => ' + newValue;\n  }\n}\n\n\nprovide('mediaQueryTracker', MediaQueryTracker);\n\n\n/**\n * Accepts a media query and returns a MediaQueryList object.\n * Caches the values to avoid multiple unnecessary instances.\n * @param {string} media A media query value.\n * @return {MediaQueryList} The matched media.\n */\nfunction getMediaList(media) {\n  return mediaMap[media] || (mediaMap[media] = window.matchMedia(media));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/media-query-tracker.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {delegate, parseUrl} from 'dom-utils';\nimport provide from '../provide';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj,\n        getAttributeFields, withTimeout} from '../utilities';\n\n\n/**\n * Class for the `outboundLinkTracker` analytics.js plugin.\n * @implements {OutboundLinkTrackerPublicInterface}\n */\nclass OutboundLinkTracker {\n  /**\n   * Registers outbound link tracking on a tracker object.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?Object} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.OUTBOUND_LINK_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!window.addEventListener) return;\n\n    /** @type {OutboundLinkTrackerOpts} */\n    const defaultOpts = {\n      events: ['click'],\n      linkSelector: 'a, area',\n      shouldTrackOutboundLink: this.shouldTrackOutboundLink,\n      fieldsObj: {},\n      attributePrefix: 'ga-',\n      // hitFilter: undefined,\n    };\n\n    this.opts = /** @type {OutboundLinkTrackerOpts} */ (\n        assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n\n    // Binds methods.\n    this.handleLinkInteractions = this.handleLinkInteractions.bind(this);\n\n    // Creates a mapping of events to their delegates\n    this.delegates = {};\n    this.opts.events.forEach((event) => {\n      this.delegates[event] = delegate(document, event, this.opts.linkSelector,\n          this.handleLinkInteractions, {composed: true, useCapture: true});\n    });\n  }\n\n  /**\n   * Handles all interactions on link elements. A link is considered an outbound\n   * link if its hostname property does not match location.hostname. When the\n   * beacon transport method is not available, the links target is set to\n   * \"_blank\" to ensure the hit can be sent.\n   * @param {Event} event The DOM click event.\n   * @param {Element} link The delegated event target.\n   */\n  handleLinkInteractions(event, link) {\n    if (this.opts.shouldTrackOutboundLink(link, parseUrl)) {\n      const href = link.getAttribute('href') || link.getAttribute('xlink:href');\n      const url = parseUrl(href);\n\n      /** @type {FieldsObj} */\n      const defaultFields = {\n        transport: 'beacon',\n        eventCategory: 'Outbound Link',\n        eventAction: event.type,\n        eventLabel: url.href,\n      };\n\n      if (!navigator.sendBeacon &&\n          linkClickWillUnloadCurrentPage(event, link)) {\n        // Adds a new event handler at the last minute to minimize the chances\n        // that another event handler for this click will run after this logic.\n        window.addEventListener('click', function(event) {\n          // Checks to make sure another event handler hasn't already prevented\n          // the default action. If it has the custom redirect isn't needed.\n          if (!event.defaultPrevented) {\n            // Stops the click and waits until the hit is complete (with\n            // timeout) for browsers that don't support beacon.\n            event.preventDefault();\n            defaultFields.hitCallback = withTimeout(function() {\n              location.href = href;\n            });\n          }\n        });\n      }\n\n      /** @type {FieldsObj} */\n      const userFields = assign({}, this.opts.fieldsObj,\n          getAttributeFields(link, this.opts.attributePrefix));\n\n      this.tracker.send('event',\n          createFieldsObj(defaultFields, userFields,\n              this.tracker, this.opts.hitFilter, link, event));\n    }\n  }\n\n  /**\n   * Determines whether or not the tracker should send a hit when a link is\n   * clicked. By default links with a hostname property not equal to the current\n   * hostname are tracked.\n   * @param {Element} link The link that was clicked on.\n   * @param {Function} parseUrlFn A cross-browser utility method for url\n   *     parsing (note: renamed to disambiguate when compiling).\n   * @return {boolean} Whether or not the link should be tracked.\n   */\n  shouldTrackOutboundLink(link, parseUrlFn) {\n    const href = link.getAttribute('href') || link.getAttribute('xlink:href');\n    const url = parseUrlFn(href);\n    return url.hostname != location.hostname &&\n        url.protocol.slice(0, 4) == 'http';\n  }\n\n  /**\n   * Removes all event listeners and instance properties.\n   */\n  remove() {\n    Object.keys(this.delegates).forEach((key) => {\n      this.delegates[key].destroy();\n    });\n  }\n}\n\n\nprovide('outboundLinkTracker', OutboundLinkTracker);\n\n\n/**\n * Determines if a link click event will cause the current page to upload.\n * Note: most link clicks *will* cause the current page to unload because they\n * initiate a page navigation. The most common reason a link click won't cause\n * the page to unload is if the clicked was to open the link in a new tab.\n * @param {Event} event The DOM event.\n * @param {Element} link The link element clicked on.\n * @return {boolean} True if the current page will be unloaded.\n */\nfunction linkClickWillUnloadCurrentPage(event, link) {\n  return !(\n      // The event type can be customized; we only care about clicks here.\n      event.type != 'click' ||\n      // Links with target=\"_blank\" set will open in a new window/tab.\n      link.target == '_blank' ||\n      // On mac, command clicking will open a link in a new tab. Control\n      // clicking does this on windows.\n      event.metaKey || event.ctrlKey ||\n      // Shift clicking in Chrome/Firefox opens the link in a new window\n      // In Safari it adds the URL to a favorites list.\n      event.shiftKey ||\n      // On Mac, clicking with the option key is used to download a resouce.\n      event.altKey ||\n      // Middle mouse button clicks (which == 2) are used to open a link\n      // in a new tab, and right clicks (which == 3) on Firefox trigger\n      // a click event.\n      event.which > 1);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/outbound-link-tracker.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {NULL_DIMENSION} from '../constants';\nimport MethodChain from '../method-chain';\nimport provide from '../provide';\nimport Session from '../session';\nimport Store from '../store';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj, deferUntilPluginsLoaded,\n    isObject, now, uuid} from '../utilities';\n\n\nconst HIDDEN = 'hidden';\nconst VISIBLE = 'visible';\nconst PAGE_ID = uuid();\nconst SECONDS = 1000;\n\n\n/**\n * Class for the `pageVisibilityTracker` analytics.js plugin.\n * @implements {PageVisibilityTrackerPublicInterface}\n */\nclass PageVisibilityTracker {\n  /**\n   * Registers outbound link tracking on tracker object.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?Object} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.PAGE_VISIBILITY_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!document.visibilityState) return;\n\n    /** @type {PageVisibilityTrackerOpts} */\n    const defaultOpts = {\n      sessionTimeout: Session.DEFAULT_TIMEOUT,\n      visibleThreshold: 5 * SECONDS,\n      // timeZone: undefined,\n      sendInitialPageview: false,\n      // pageLoadsMetricIndex: undefined,\n      // visibleMetricIndex: undefined,\n      fieldsObj: {},\n      // hitFilter: undefined\n    };\n\n    this.opts = /** @type {PageVisibilityTrackerOpts} */ (\n        assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n    this.lastPageState = document.visibilityState;\n    this.visibleThresholdTimeout_ = null;\n    this.isInitialPageviewSent_ = false;\n\n    // Binds methods to `this`.\n    this.trackerSetOverride = this.trackerSetOverride.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleWindowUnload = this.handleWindowUnload.bind(this);\n    this.handleExternalStoreSet = this.handleExternalStoreSet.bind(this);\n\n    // Creates the store and binds storage change events.\n    this.store = Store.getOrCreate(\n        tracker.get('trackingId'), 'plugins/page-visibility-tracker');\n    this.store.on('externalSet', this.handleExternalStoreSet);\n\n    // Creates the session and binds session events.\n    this.session = Session.getOrCreate(\n        tracker, this.opts.sessionTimeout, this.opts.timeZone);\n\n    // Override the built-in tracker.set method to watch for changes.\n    MethodChain.add(tracker, 'set', this.trackerSetOverride);\n\n    window.addEventListener('unload', this.handleWindowUnload);\n    document.addEventListener('visibilitychange', this.handleChange);\n\n    // Postpone sending any hits until the next call stack, which allows all\n    // autotrack plugins to be required sync before any hits are sent.\n    deferUntilPluginsLoaded(this.tracker, () => {\n      if (document.visibilityState == VISIBLE) {\n        if (this.opts.sendInitialPageview) {\n          this.sendPageview({isPageLoad: true});\n          this.isInitialPageviewSent_ = true;\n        }\n        this.store.set(/** @type {PageVisibilityStoreData} */ ({\n          time: now(),\n          state: VISIBLE,\n          pageId: PAGE_ID,\n          sessionId: this.session.getId(),\n        }));\n      } else {\n        if (this.opts.sendInitialPageview && this.opts.pageLoadsMetricIndex) {\n          this.sendPageLoad();\n        }\n      }\n    });\n  }\n\n  /**\n   * Inspects the last visibility state change data and determines if a\n   * visibility event needs to be tracked based on the current visibility\n   * state and whether or not the session has expired. If the session has\n   * expired, a change to `visible` will trigger an additional pageview.\n   * This method also sends as the event value (and optionally a custom metric)\n   * the elapsed time between this event and the previously reported change\n   * in the same session, allowing you to more accurately determine when users\n   * were actually looking at your page versus when it was in the background.\n   */\n  handleChange() {\n    if (!(document.visibilityState == VISIBLE ||\n        document.visibilityState == HIDDEN)) {\n      return;\n    }\n\n    const lastStoredChange = this.getAndValidateChangeData();\n\n    /** @type {PageVisibilityStoreData} */\n    const change = {\n      time: now(),\n      state: document.visibilityState,\n      pageId: PAGE_ID,\n      sessionId: this.session.getId(),\n    };\n\n    // If the visibilityState has changed to visible and the initial pageview\n    // has not been sent (and the `sendInitialPageview` option is `true`).\n    // Send the initial pageview now.\n    if (document.visibilityState == VISIBLE &&\n        this.opts.sendInitialPageview && !this.isInitialPageviewSent_) {\n      this.sendPageview();\n      this.isInitialPageviewSent_ = true;\n    }\n\n    // If the visibilityState has changed to hidden, clear any scheduled\n    // pageviews waiting for the visibleThreshold timeout.\n    if (document.visibilityState == HIDDEN && this.visibleThresholdTimeout_) {\n      clearTimeout(this.visibleThresholdTimeout_);\n    }\n\n    if (this.session.isExpired(lastStoredChange.sessionId)) {\n      this.store.clear();\n      if (this.lastPageState == HIDDEN &&\n          document.visibilityState == VISIBLE) {\n        // If the session has expired, changes from hidden to visible should\n        // be considered a new pageview rather than a visibility event.\n        // This behavior ensures all sessions contain a pageview so\n        // session-level page dimensions and metrics (e.g. ga:landingPagePath\n        // and ga:entrances) are correct.\n        // Also, in order to prevent false positives, we add a small timeout\n        // that is cleared if the visibilityState changes to hidden shortly\n        // after the change to visible. This can happen if a user is quickly\n        // switching through their open tabs but not actually interacting with\n        // and of them. It can also happen when a user goes to a tab just to\n        // immediately close it. Such cases should not be considered pageviews.\n        clearTimeout(this.visibleThresholdTimeout_);\n        this.visibleThresholdTimeout_ = setTimeout(() => {\n          this.store.set(change);\n          this.sendPageview({hitTime: change.time});\n        }, this.opts.visibleThreshold);\n      }\n    } else {\n      if (lastStoredChange.pageId == PAGE_ID &&\n          lastStoredChange.state == VISIBLE) {\n        this.sendPageVisibilityEvent(lastStoredChange);\n      }\n      this.store.set(change);\n    }\n\n    this.lastPageState = document.visibilityState;\n  }\n\n  /**\n   * Retroactively updates the stored change data in cases where it's known to\n   * be out of sync.\n   * This plugin keeps track of each visiblity change and stores the last one\n   * in localStorage. LocalStorage is used to handle situations where the user\n   * has multiple page open at the same time and we don't want to\n   * double-report page visibility in those cases.\n   * However, a problem can occur if a user closes a page when one or more\n   * visible pages are still open. In such cases it's impossible to know\n   * which of the remaining pages the user will interact with next.\n   * To solve this problem we wait for the next change on any page and then\n   * retroactively update the stored data to reflect the current page as being\n   * the page on which the last change event occured and measure visibility\n   * from that point.\n   * @return {!PageVisibilityStoreData}\n   */\n  getAndValidateChangeData() {\n    const lastStoredChange =\n        /** @type {PageVisibilityStoreData} */ (this.store.get());\n\n    if (this.lastPageState == VISIBLE &&\n        lastStoredChange.state == HIDDEN &&\n        lastStoredChange.pageId != PAGE_ID) {\n      lastStoredChange.state = VISIBLE;\n      lastStoredChange.pageId = PAGE_ID;\n      this.store.set(lastStoredChange);\n    }\n    return lastStoredChange;\n  }\n\n  /**\n   * Sends a Page Visibility event to track the time this page was in the\n   * visible state (assuming it was in that state long enough to meet the\n   * threshold).\n   * @param {!PageVisibilityStoreData} lastStoredChange\n   * @param {{hitTime: (number|undefined)}=} param1\n   *     - hitTime: A hit timestap used to help ensure original order in cases\n   *                where the send is delayed.\n   */\n  sendPageVisibilityEvent(lastStoredChange, {hitTime} = {}) {\n    const delta = this.getTimeSinceLastStoredChange(\n        lastStoredChange, {hitTime});\n\n    // If the detla is greater than the visibileThreshold, report it.\n    if (delta && delta >= this.opts.visibleThreshold) {\n      const deltaInSeconds = Math.round(delta / SECONDS);\n\n      /** @type {FieldsObj} */\n      const defaultFields = {\n        transport: 'beacon',\n        nonInteraction: true,\n        eventCategory: 'Page Visibility',\n        eventAction: 'track',\n        eventValue: deltaInSeconds,\n        eventLabel: NULL_DIMENSION,\n      };\n\n      if (hitTime) {\n        defaultFields.queueTime = now() - hitTime;\n      }\n\n      // If a custom metric was specified, set it equal to the event value.\n      if (this.opts.visibleMetricIndex) {\n        defaultFields['metric' + this.opts.visibleMetricIndex] = deltaInSeconds;\n      }\n\n      this.tracker.send('event',\n          createFieldsObj(defaultFields, this.opts.fieldsObj,\n              this.tracker, this.opts.hitFilter));\n    }\n  }\n\n  /**\n   * Sends a page load event.\n   */\n  sendPageLoad() {\n    /** @type {FieldsObj} */\n    const defaultFields = {\n      transport: 'beacon',\n      eventCategory: 'Page Visibility',\n      eventAction: 'page load',\n      eventLabel: NULL_DIMENSION,\n      ['metric' + this.opts.pageLoadsMetricIndex]: 1,\n      nonInteraction: true,\n    };\n    this.tracker.send('event',\n        createFieldsObj(defaultFields, this.opts.fieldsObj,\n            this.tracker, this.opts.hitFilter));\n  }\n\n  /**\n   * Sends a pageview, optionally calculating an offset if hitTime is passed.\n   * @param {{\n   *   hitTime: (number|undefined),\n   *   isPageLoad: (boolean|undefined)\n   * }=} param1\n   *     hitTime: The timestamp of the current hit.\n   *     isPageLoad: True if this pageview was also a page load.\n   */\n  sendPageview({hitTime, isPageLoad} = {}) {\n    /** @type {FieldsObj} */\n    const defaultFields = {transport: 'beacon'};\n    if (hitTime) {\n      defaultFields.queueTime = now() - hitTime;\n    }\n    if (isPageLoad && this.opts.pageLoadsMetricIndex) {\n      defaultFields['metric' + this.opts.pageLoadsMetricIndex] = 1;\n    }\n\n    this.tracker.send('pageview',\n        createFieldsObj(defaultFields, this.opts.fieldsObj,\n            this.tracker, this.opts.hitFilter));\n  }\n\n  /**\n   * Detects changes to the tracker object and triggers an update if the page\n   * field has changed.\n   * @param {function((Object|string), (string|undefined))} originalMethod\n   *     A reference to the overridden method.\n   * @return {function((Object|string), (string|undefined))}\n   */\n  trackerSetOverride(originalMethod) {\n    return (field, value) => {\n      /** @type {!FieldsObj} */\n      const fields = isObject(field) ? field : {[field]: value};\n      if (fields.page && fields.page !== this.tracker.get('page')) {\n        if (this.lastPageState == VISIBLE) {\n          this.handleChange();\n        }\n      }\n      originalMethod(field, value);\n    };\n  }\n\n  /**\n   * Calculates the time since the last visibility change event in the current\n   * session. If the session has expired the reported time is zero.\n   * @param {PageVisibilityStoreData} lastStoredChange\n   * @param {{hitTime: (number|undefined)}=} param1\n   *     hitTime: The time of the current hit (defaults to now).\n   * @return {number} The time (in ms) since the last change.\n   */\n  getTimeSinceLastStoredChange(lastStoredChange, {hitTime} = {}) {\n    return lastStoredChange.time ?\n        (hitTime || now()) - lastStoredChange.time : 0;\n  }\n\n  /**\n   * Handles responding to the `storage` event.\n   * The code on this page needs to be informed when other tabs or windows are\n   * updating the stored page visibility state data. This method checks to see\n   * if a hidden state is stored when there are still visible tabs open, which\n   * can happen if multiple windows are open at the same time.\n   * @param {PageVisibilityStoreData} newData\n   * @param {PageVisibilityStoreData} oldData\n   */\n  handleExternalStoreSet(newData, oldData) {\n    // If the change times are the same, then the previous write only\n    // updated the active page ID. It didn't enter a new state and thus no\n    // hits should be sent.\n    if (newData.time == oldData.time) return;\n\n    // Page Visibility events must be sent by the tracker on the page\n    // where the original event occurred. So if a change happens on another\n    // page, but this page is where the previous change event occurred, then\n    // this page is the one that needs to send the event (so all dimension\n    // data is correct).\n    if (oldData.pageId == PAGE_ID &&\n        oldData.state == VISIBLE &&\n        !this.session.isExpired(oldData.sessionId)) {\n      this.sendPageVisibilityEvent(oldData, {hitTime: newData.time});\n    }\n  }\n\n  /**\n   * Handles responding to the `unload` event.\n   * Since some browsers don't emit a `visibilitychange` event in all cases\n   * where a page might be unloaded, it's necessary to hook into the `unload`\n   * event to ensure the correct state is always stored.\n   */\n  handleWindowUnload() {\n    // If the stored visibility state isn't hidden when the unload event\n    // fires, it means the visibilitychange event didn't fire as the document\n    // was being unloaded, so we invoke it manually.\n    if (this.lastPageState != HIDDEN) {\n      this.handleChange();\n    }\n  }\n\n  /**\n   * Removes all event listeners and restores overridden methods.\n   */\n  remove() {\n    this.store.destroy();\n    this.session.destroy();\n    MethodChain.remove(this.tracker, 'set', this.trackerSetOverride);\n    window.removeEventListener('unload', this.handleWindowUnload);\n    document.removeEventListener('visibilitychange', this.handleChange);\n  }\n}\n\n\nprovide('pageVisibilityTracker', PageVisibilityTracker);\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/page-visibility-tracker.js","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport provide from '../provide';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj} from '../utilities';\n\n\n/**\n * Class for the `socialWidgetTracker` analytics.js plugin.\n * @implements {SocialWidgetTrackerPublicInterface}\n */\nclass SocialWidgetTracker {\n  /**\n   * Registers social tracking on tracker object.\n   * Supports both declarative social tracking via HTML attributes as well as\n   * tracking for social events when using official Twitter or Facebook widgets.\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?Object} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.SOCIAL_WIDGET_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!window.addEventListener) return;\n\n    /** @type {SocialWidgetTrackerOpts} */\n    const defaultOpts = {\n      fieldsObj: {},\n      hitFilter: null,\n    };\n\n    this.opts = /** @type {SocialWidgetTrackerOpts} */ (\n        assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n\n    // Binds methods to `this`.\n    this.addWidgetListeners = this.addWidgetListeners.bind(this);\n    this.addTwitterEventHandlers = this.addTwitterEventHandlers.bind(this);\n    this.handleTweetEvents = this.handleTweetEvents.bind(this);\n    this.handleFollowEvents = this.handleFollowEvents.bind(this);\n    this.handleLikeEvents = this.handleLikeEvents.bind(this);\n    this.handleUnlikeEvents = this.handleUnlikeEvents.bind(this);\n\n    if (document.readyState != 'complete') {\n      // Adds the widget listeners after the window's `load` event fires.\n      // If loading widgets using the officially recommended snippets, they\n      // will be available at `window.load`. If not users can call the\n      // `addWidgetListeners` method manually.\n      window.addEventListener('load', this.addWidgetListeners);\n    } else {\n      this.addWidgetListeners();\n    }\n  }\n\n\n  /**\n   * Invokes the methods to add Facebook and Twitter widget event listeners.\n   * Ensures the respective global namespaces are present before adding.\n   */\n  addWidgetListeners() {\n    if (window.FB) this.addFacebookEventHandlers();\n    if (window.twttr) this.addTwitterEventHandlers();\n  }\n\n  /**\n   * Adds event handlers for the \"tweet\" and \"follow\" events emitted by the\n   * official tweet and follow buttons. Note: this does not capture tweet or\n   * follow events emitted by other Twitter widgets (tweet, timeline, etc.).\n   */\n  addTwitterEventHandlers() {\n    try {\n      window.twttr.ready(() => {\n        window.twttr.events.bind('tweet', this.handleTweetEvents);\n        window.twttr.events.bind('follow', this.handleFollowEvents);\n      });\n    } catch(err) {\n      // Do nothing.\n    }\n  }\n\n  /**\n   * Removes event handlers for the \"tweet\" and \"follow\" events emitted by the\n   * official tweet and follow buttons.\n   */\n  removeTwitterEventHandlers() {\n    try {\n      window.twttr.ready(() => {\n        window.twttr.events.unbind('tweet', this.handleTweetEvents);\n        window.twttr.events.unbind('follow', this.handleFollowEvents);\n      });\n    } catch(err) {\n      // Do nothing.\n    }\n  }\n\n  /**\n   * Adds event handlers for the \"like\" and \"unlike\" events emitted by the\n   * official Facebook like button.\n   */\n  addFacebookEventHandlers() {\n    try {\n      window.FB.Event.subscribe('edge.create', this.handleLikeEvents);\n      window.FB.Event.subscribe('edge.remove', this.handleUnlikeEvents);\n    } catch(err) {\n      // Do nothing.\n    }\n  }\n\n  /**\n   * Removes event handlers for the \"like\" and \"unlike\" events emitted by the\n   * official Facebook like button.\n   */\n  removeFacebookEventHandlers() {\n    try {\n      window.FB.Event.unsubscribe('edge.create', this.handleLikeEvents);\n      window.FB.Event.unsubscribe('edge.remove', this.handleUnlikeEvents);\n    } catch(err) {\n      // Do nothing.\n    }\n  }\n\n  /**\n   * Handles `tweet` events emitted by the Twitter JS SDK.\n   * @param {TwttrEvent} event The Twitter event object passed to the handler.\n   */\n  handleTweetEvents(event) {\n    // Ignores tweets from widgets that aren't the tweet button.\n    if (event.region != 'tweet') return;\n\n    const url = event.data.url || event.target.getAttribute('data-url') ||\n        location.href;\n\n    /** @type {FieldsObj} */\n    const defaultFields = {\n      transport: 'beacon',\n      socialNetwork: 'Twitter',\n      socialAction: 'tweet',\n      socialTarget: url,\n    };\n    this.tracker.send('social',\n        createFieldsObj(defaultFields, this.opts.fieldsObj,\n            this.tracker, this.opts.hitFilter, event.target, event));\n  }\n\n  /**\n   * Handles `follow` events emitted by the Twitter JS SDK.\n   * @param {TwttrEvent} event The Twitter event object passed to the handler.\n   */\n  handleFollowEvents(event) {\n    // Ignore follows from widgets that aren't the follow button.\n    if (event.region != 'follow') return;\n\n    const screenName = event.data.screen_name ||\n        event.target.getAttribute('data-screen-name');\n\n    /** @type {FieldsObj} */\n    const defaultFields = {\n      transport: 'beacon',\n      socialNetwork: 'Twitter',\n      socialAction: 'follow',\n      socialTarget: screenName,\n    };\n    this.tracker.send('social',\n        createFieldsObj(defaultFields, this.opts.fieldsObj,\n            this.tracker, this.opts.hitFilter, event.target, event));\n  }\n\n  /**\n   * Handles `like` events emitted by the Facebook JS SDK.\n   * @param {string} url The URL corresponding to the like event.\n   */\n  handleLikeEvents(url) {\n    /** @type {FieldsObj} */\n    const defaultFields = {\n      transport: 'beacon',\n      socialNetwork: 'Facebook',\n      socialAction: 'like',\n      socialTarget: url,\n    };\n    this.tracker.send('social', createFieldsObj(defaultFields,\n        this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n  }\n\n  /**\n   * Handles `unlike` events emitted by the Facebook JS SDK.\n   * @param {string} url The URL corresponding to the unlike event.\n   */\n  handleUnlikeEvents(url) {\n    /** @type {FieldsObj} */\n    const defaultFields = {\n      transport: 'beacon',\n      socialNetwork: 'Facebook',\n      socialAction: 'unlike',\n      socialTarget: url,\n    };\n    this.tracker.send('social', createFieldsObj(defaultFields,\n        this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n  }\n\n  /**\n   * Removes all event listeners and instance properties.\n   */\n  remove() {\n    window.removeEventListener('load', this.addWidgetListeners);\n    this.removeFacebookEventHandlers();\n    this.removeTwitterEventHandlers();\n  }\n}\n\n\nprovide('socialWidgetTracker', SocialWidgetTracker);\n\n\n\n// WEBPACK FOOTER //\n// ./~/autotrack/lib/plugins/social-widget-tracker.js","import closest from './closest';\nimport matches from './matches';\n\n/**\n * Delegates the handling of events for an element matching a selector to an\n * ancestor of the matching element.\n * @param {!Node} ancestor The ancestor element to add the listener to.\n * @param {string} eventType The event type to listen to.\n * @param {string} selector A CSS selector to match against child elements.\n * @param {!Function} callback A function to run any time the event happens.\n * @param {Object=} opts A configuration options object. The available options:\n *     - useCapture<boolean>: If true, bind to the event capture phase.\n *     - deep<boolean>: If true, delegate into shadow trees.\n * @return {Object} The delegate object. It contains a destroy method.\n */\nexport default function delegate(\n    ancestor, eventType, selector, callback, opts = {}) {\n  // Defines the event listener.\n  const listener = function(event) {\n    let delegateTarget;\n\n    // If opts.composed is true and the event originated from inside a Shadow\n    // tree, check the composed path nodes.\n    if (opts.composed && typeof event.composedPath == 'function') {\n      const composedPath = event.composedPath();\n      for (let i = 0, node; node = composedPath[i]; i++) {\n        if (node.nodeType == 1 && matches(node, selector)) {\n          delegateTarget = node;\n        }\n      }\n    } else {\n      // Otherwise check the parents.\n      delegateTarget = closest(event.target, selector, true);\n    }\n\n    if (delegateTarget) {\n      callback.call(delegateTarget, event, delegateTarget);\n    }\n  };\n\n  ancestor.addEventListener(eventType, listener, opts.useCapture);\n\n  return {\n    destroy: function() {\n      ancestor.removeEventListener(eventType, listener, opts.useCapture);\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/delegate.js","/**\n * Dispatches an event on the passed element.\n * @param {!Element} element The DOM element to dispatch the event on.\n * @param {string} eventType The type of event to dispatch.\n * @param {Object|string=} eventName A string name of the event constructor\n *     to use. Defaults to 'Event' if nothing is passed or 'CustomEvent' if\n *     a value is set on `initDict.detail`. If eventName is given an object\n *     it is assumed to be initDict and thus reassigned.\n * @param {Object=} initDict The initialization attributes for the\n *     event. A `detail` property can be used here to pass custom data.\n * @return {boolean} The return value of `element.dispatchEvent`, which will\n *     be false if any of the event listeners called `preventDefault`.\n */\nexport default function dispatch(\n    element, eventType, eventName = 'Event', initDict = {}) {\n  let event;\n  let isCustom;\n\n  // eventName is optional\n  if (typeof eventName == 'object') {\n    initDict = eventName;\n    eventName = 'Event';\n  }\n\n  initDict.bubbles = initDict.bubbles || false;\n  initDict.cancelable = initDict.cancelable || false;\n  initDict.composed = initDict.composed || false;\n\n  // If a detail property is passed, this is a custom event.\n  if ('detail' in initDict) isCustom = true;\n  eventName = isCustom ? 'CustomEvent' : eventName;\n\n  // Tries to create the event using constructors, if that doesn't work,\n  // fallback to `document.createEvent()`.\n  try {\n    event = new window[eventName](eventType, initDict);\n  } catch(err) {\n    event = document.createEvent(eventName);\n    const initMethod = 'init' + (isCustom ? 'Custom' : '') + 'Event';\n    event[initMethod](eventType, initDict.bubbles,\n                      initDict.cancelable, initDict.detail);\n  }\n\n  return element.dispatchEvent(event);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/dispatch.js","/**\n * Gets all attributes of an element as a plain JavaScriot object.\n * @param {Element} element The element whose attributes to get.\n * @return {!Object} An object whose keys are the attribute keys and whose\n *     values are the attribute values. If no attributes exist, an empty\n *     object is returned.\n */\nexport default function getAttributes(element) {\n  const attrs = {};\n\n  // Validate input.\n  if (!(element && element.nodeType == 1)) return attrs;\n\n  // Return an empty object if there are no attributes.\n  const map = element.attributes;\n  if (map.length === 0) return {};\n\n  for (let i = 0, attr; attr = map[i]; i++) {\n    attrs[attr.name] = attr.value;\n  }\n  return attrs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/get-attributes.js","const HTTP_PORT = '80';\nconst HTTPS_PORT = '443';\nconst DEFAULT_PORT = RegExp(':(' + HTTP_PORT + '|' + HTTPS_PORT + ')$');\n\n\nconst a = document.createElement('a');\nconst cache = {};\n\n\n/**\n * Parses the given url and returns an object mimicing a `Location` object.\n * @param {string} url The url to parse.\n * @return {!Object} An object with the same properties as a `Location`.\n */\nexport default function parseUrl(url) {\n  // All falsy values (as well as \".\") should map to the current URL.\n  url = (!url || url == '.') ? location.href : url;\n\n  if (cache[url]) return cache[url];\n\n  a.href = url;\n\n  // When parsing file relative paths (e.g. `../index.html`), IE will correctly\n  // resolve the `href` property but will keep the `..` in the `path` property.\n  // It will also not include the `host` or `hostname` properties. Furthermore,\n  // IE will sometimes return no protocol or just a colon, especially for things\n  // like relative protocol URLs (e.g. \"//google.com\").\n  // To workaround all of these issues, we reparse with the full URL from the\n  // `href` property.\n  if (url.charAt(0) == '.' || url.charAt(0) == '/') return parseUrl(a.href);\n\n  // Don't include default ports.\n  let port = (a.port == HTTP_PORT || a.port == HTTPS_PORT) ? '' : a.port;\n\n  // PhantomJS sets the port to \"0\" when using the file: protocol.\n  port = port == '0' ? '' : port;\n\n  // Sometimes IE incorrectly includes a port for default ports\n  // (e.g. `:80` or `:443`) even when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  const host = a.host.replace(DEFAULT_PORT, '');\n\n  // Not all browser support `origin` so we have to build it.\n  const origin = a.origin ? a.origin : a.protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  const pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    pathname: pathname,\n    port: port,\n    protocol: a.protocol,\n    search: a.search,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/dom-utils/lib/parse-url.js"],"sourceRoot":""}